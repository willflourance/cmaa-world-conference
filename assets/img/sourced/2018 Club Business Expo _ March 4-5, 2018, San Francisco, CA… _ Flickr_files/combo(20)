YUI.add("flickr-contacts-getListfetcher",function(e,t){"use strict";e.namespace("ListFetchers")["flickr-contacts-getList"]={run:function(r,s){var c=this;return r.extras=(r.extras||"")+", icon_urls, paid_products",e.Promise.all([s.callAPI("flickr.contacts.getList",r),s.getModelRegistry("person-models")]).then(function(e){return c._processResponse(e,r)},e.FetcherErrorLogger(t))},_processResponse:function(t,r){var s=t[0],c=t[1];return s.contacts&&s.contacts.contact&&s.contacts.contact.forEach(function(t){c.addOrUpdate(e.APIHelper.response.parsePerson(t))}),s}}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["person-models"]});YUI.add("contact-search-box",function(t){var e,i=function(i){this.options=i,this.options.elValue=this.options.elValue||"value",this.options.hideInitially,this._contacts=null,this.queryEl=this.options.el,this.queryElEvent,this.listEl=null,e=this.options.DOMContainer||t.config.win,this.init()};i.prototype={langBundles:this.details.langBundles,init:function(){var e=this;if(!1!==this.options.showFollowingState&&(this.options.showFollowingState=!0),!this.queryEl)throw new Error("Need this.queryEl.");this.queryEl.on("keydown",this.keynav.bind(this)),this.queryElEvent=this.queryEl.on("keyup",this.search.bind(this)),this.wrapperEl=t.Node.create("<div/>"),this.wrapperEl.addClass("c-contact-search-autocomplete"),this.listEl=t.Node.create("<ul/>"),this.listEl.addClass("contact-list"),this.wrapperEl.appendChild(this.listEl),this.listEl.on("mouseover",function(t){var i=t.target.ancestor("li",!0);i&&i!==e.highlighted&&e._highlight(i)}),this.queryEl.ancestor().insertBefore(this.wrapperEl,this.queryEl),this.wrapperEl.appendChild(this.queryEl),this.options.clickContact=this.options.clickContact||function(t){var i=t.target.ancestor("[data-nsid]",!0),s=i?i.getData("nsid"):"";e.select(s)},this.listEl.delegate("click",this.options.clickContact,"li"),this.selectedIndex=0},keynav:function(t){38===t.keyCode?(t.preventDefault(),this.selectedIndex--,this.selectedIndex<0&&(this.selectedIndex=this.numShowing+this.selectedIndex),this._highlight(this.selectedIndex),this._scrollToNode(this.highlighted)):40===t.keyCode?(t.preventDefault(),this.selectedIndex++,this.selectedIndex>this.numShowing-1&&(this.selectedIndex=this.numShowing-this.selectedIndex),this._highlight(this.selectedIndex),this._scrollToNode(this.highlighted)):9===t.keyCode?this._visible&&this.highlighted&&(t.preventDefault(),this.select(this.highlighted.getData("nsid"))):13===t.keyCode&&this._visible&&this.highlighted&&(t.preventDefault(),t.target.ancestor(".share-view",!0)||t.target.ancestor(".fluid-share-panel-view",!0)?this.select(this.highlighted.getData("nsid")):this.options.clickContact(t,this.highlighted))},_highlight:function(e){var i=this.listEl.all("li"),s=e instanceof t.Node,n=s?e:i.item(e),o=s?i.indexOf(e):e;!n||n.hasClass("loading")||n.hasClass("no-members")||(i.removeClass("highlight"),n.addClass("highlight"),this.selectedIndex=o,this.highlighted=n)},_scrollToNode:function(t){var e=this.listEl.get("scrollTop"),i=e+this.listEl.get("clientHeight"),s=t.get("offsetTop"),n=s+t.get("clientHeight");e>s?this.listEl.set("scrollTop",s-5):i<n&&this.listEl.set("scrollTop",n-this.listEl.get("clientHeight")+5)},getContact:function(t){for(var e=0,i=this._contacts,s=i.length;e<s;e++)if(i[e].nsid===t&&!i[e].hide)return i[e]},hideFromSearch:function(t){t=t.trim(),this._contacts&&this._contacts.some(function(e){if(e.nsid.trim()===t)return e.hide=!0,!0})},resetSearch:function(){this._contacts&&this._contacts.forEach(function(t){t.hide=!1})},showInSearch:function(t){t=t.trim(),this._contacts&&this._contacts.some(function(e){if(e.nsid.trim()===t)return e.hide=!1,!0})},load:function(t){var e,i={},s=this;if(!this._busy)return this._end=!1,this._busy=!0,i.can_tag=this.options.canTag||0,e=this.options.appContext.getViewer().nsid,this.options.appContext.getModel("contacts-models",e).then(function(e){return i.page=1,i.perPage=3e3,i.per_page=3e3,s._loadMoreContacts(e,i,t)},function(){s._busy=!1,s.options.onError()})},_loadMoreContacts:function(t,e,i){var s=this;return this._busy=!0,s.options.loadingState&&!s.listEl.one("li.loading")&&s.appendLoader(),t.getValue("contacts").getPage(e).then(function(n){s._contacts=(s.processContactModels(n,!0,!0)||[]).concat(s._contacts||[]),i(),s._contacts&&0!==s._contacts.length||s.hide(),e.page<t.getValue("pages")&&(e.page++,s._loadMoreContacts(t,e,i))},function(){s._busy=!1,s.options.onError()})},processContactModels:function(e,i,s){var n,o,l,h=this;try{l=e.map(function(t){return t.toJSON()})||[]}catch(t){l=[]}if(!h.contactIds&&(h.contactIds={},h._contacts))for(o in h._contacts)h.contactIds[o.id]=!0;return(l=l.filter(function(t){return!h.contactIds[t.id]})).forEach(function(e,i){h.contactIds[e.id]=!0,e.realname=e.realname||e.username,e.isContact=s,e.buddyicon=t.URLHelper.getBuddyIconURL(e.nsid,e.iconfarm,e.iconserver)}),i&&h.options.me&&(n=h.options.me.toJSON(),t.APIHelper.response.agnosticizeFarmPathTransferProtocol(n.buddyicon),n.buddyicon=n.buddyicon.default,h.contactIds[n.id]=!0,n.me=!0,l.push(n)),h.options.hideInitially&&l.forEach(function(t){h.options.hideInitially.indexOf(t.nsid)>-1&&(t.hide=!0)}),l},destructor:function(){this.queryElEvent&&this.queryElEvent.detach&&this.queryElEvent.detach()},hide:function(t){t&&t.halt(),this._visible&&(this._visible=!1,this.highlighted=null,this.selectedIndex=0,this.selected=null,this.options.noShim||this._shimUp(!1),this.listEl.setStyle("display","none"),this.options.onHide&&this.options.onHide())},show:function(){this._visible||(this._visible=!0,this.options.noShim||this._shimUp(),this.listEl.setStyle("display","block"),this._reposition(),this.options.onShow())},_reposition:function(){var i,s={width:e.innerWidth||e.clientWidth,height:e.innerHeight||e.clientHeight},n=this.options.el,o=n.getDOMNode(),l=o.getBoundingClientRect(),h=this.listEl.getDOMNode().getBoundingClientRect(),a=!this._contacts&&this.options.upInitially,c=e===t.config.win?l.top:o.clientTop;this.options.dialogOffset&&(i=this.options.dialogOffset()),a||c>0&&c+h.height+25>s.height&&!this.options.alwaysDownward?(this.listEl.setStyle("top","auto"),this.listEl.setStyle("bottom","25px"),this.options.onOrientationChange&&this.options.onOrientationChange(!0)):(this.listEl.setStyle("top",i||null),this.listEl.setStyle("bottom",null),this.options.onOrientationChange&&this.options.onOrientationChange(!1),n.ancestor(".modal",!0)&&this.listEl.setStyle("maxHeight",s.height-c-25))},_shimUp:function(e){if(!1===e){if(!this._shim)return;return this._shim.detach("click").remove(),void(this._shim=null)}this._shim=t.Node.create("<div/>"),this._shim.addClass(this.options.shim),this._shim.on("click",this.hide.bind(this)),this.wrapperEl.appendChild(this._shim)},select:function(t){"string"==typeof t&&(t=this.getContact(t))&&this.queryEl.set("value",t.realname),t&&(this.selected=t,this.options.onSelect(t)),this.hide()},search:function(t){var e,i,s=this.queryEl.get(this.options.elValue),n=this,o=this.options.appContext.getViewer().nsid;if(t&&27===t.keyCode)return t.preventDefault(),void this.queryEl.blur();if(t&&-1!==[38,40,9].indexOf(t.keyCode))t.preventDefault();else{if(this._nameTest(s),this.selected=null,this.selectedIndex=0,this.abort=!1,""===s.trim())return this.abort=!0,this.hide();if(this.options.searchNonContacts||(this._end=!0,this._busy=!1),this._contacts&&this.options.me&&"me"===s)return this.showResults(this._contacts.filter(function(t){return!t.hide&&t.me}).concat(this._contacts.filter(function(t){return!t.hide&&n._matchesQuery(t)})));if(this._isEmail(s))return this.select({email:s,nsid:null});if(/,/.test(s))return this.select(null);if(!this._contacts){if(this.options.signedOut)return;this.showResults(),this.load(this.search.bind(this))}this._contacts&&(e=this._contacts.filter(function(t){return!t.hide&&n._matchesQuery(t)})),this.showResults(e),n.listEl.getDOMNode(),this.options.searchNonContacts&&(this.options.loadMoreOnScroll&&s.length>0?(i=1,clearTimeout(this.searchAllPeople),this.searchInstanceId=999999*Math.random(),this.searchAllPeople=setTimeout(function(){n._searchPeople(s,o,i,n.searchInstanceId,function(){n._busy=!1,n.showResults(n._contacts.filter(function(t){return!t.hide&&n._matchesQuery(t)})),n.listElScrollEvent=n.listEl.on("scroll",function(){n.listEl._node.clientHeight+n.listEl._node.scrollTop===n.listEl._node.scrollHeight&&(i++,n._loadMore(i,o,s))})})},500)):(clearTimeout(this.searchAllPeople),this.searchInstanceId=999999*Math.random()))}},_loadMore:function(t,e,i){var s=this;this._busy=!0,clearTimeout(this.searchAllPeople),this.searchInstanceId=999999*Math.random(),this.searchAllPeople=setTimeout(function(){s.options.loadingState&&!s.listEl.one("li.loading")&&s.appendLoader(),s._searchPeople(i,e,t,s.searchInstanceId,function(){s.showResults(s._contacts.filter(function(t){return!t.hide&&s._matchesQuery(t)})),s.listElScrollEvent&&s.listElScrollEvent.detach(),s.listElScrollEvent=s.listEl.on("scroll",function(){s.listEl._node.clientHeight+s.listEl._node.scrollTop===s.listEl._node.scrollHeight&&(t++,s._loadMore(t,e,i))})})},100)},_nameTest:function(e){var i=new RegExp(".*"+t.flutil.agnosticizeUnicode(e).replace(/\s/,"\\s")+".*","ig");this._matchesQuery=function(t){return i.test(t.username)||i.test(t.realname)||i.test(t.email)}},appendLoader:function(t){t=t||this.listEl;var e=document.createElement("li"),i=t.scrollTop;e.className="loading",e.innerHTML=this.options.loadingState,t.appendChild(e),t.scrollTop=i+e.clientHeight},_searchPeople:function(t,e,i,s,n){var o,l=this;l._end=!1,l.options.loadingState&&!l.listEl.one("li.loading")&&l.appendLoader(),l.options.appContext.getModel("contacts-models",e).then(function(e){return(o=e.search({username:t,page:i})).then(function(t){var e=t.people,i=l.processContactModels(e,!1,!1);l._contacts=l._contacts||[],l._contacts=l._contacts.concat(i),l._contacts.some(function(t){return l._matchesQuery(t)})||(l._end=!0),n()},function(){l._end=!0,l._busy=!1,n()})},function(){l._end=!0,l._busy=!1,n()})},_isEmail:function(t,e){t=/,/.test(t)?t.split(/,/):[t];var i=/^\s*[\w\-\+_]+(\.[\w\-\+_]+)*@[\w\-\+_]+\.[\w\-\+_]+(\.[\w\-\+_]+)*\s*$/;if(e){for(;t.length;)if(i.test(t.shift().trim()))return!0;return!1}for(;t.length;)if(!i.test(t.shift().trim()))return!1;return!0},showResults:function(e){if(!this.abort){var i,s,n=this.options.max||10,o=this;i=document.createDocumentFragment(),e&&this.selectedIndex>=e.length&&(this.selectedIndex=e.length-1),this.numShowing=Math.min(n,e&&e.length||0),!o._busy&&e&&0===e.length?((s=document.createElement("li")).innerHTML='<span class="no-contacts">'+this.intlMessage({intlName:"photo-page-scrappy.NO_MEMBERS_FOUND"})+"</span>",s.className="no-members",i.appendChild(s),o.highlighted=null):e&&e.slice(0,n).forEach(function(e,s,n){var l=o.createItem(e);s===o.selectedIndex&&(l.setAttribute("class","highlight"),o.highlighted=t.Node(l)),i.appendChild(l)}),!o._busy&&e||!o.options.loadingState||o.appendLoader(i),this.options.loadMoreOnScroll&&this.listElScrollEvent&&this.listElScrollEvent.detach(),this.listEl.setHTML(""),this.listEl.getDOMNode().appendChild(i),this.show()}},_template:function(){return['<img src="{{buddyicon}}">','<div class="following-status {{isContact}}">','<span class="following-icon">&nbsp;</span>',"<span>"+this.intlMessage({intlName:"common.FOLLOWING"})+"</span>","</div>",'<h2 class="all">{{realname}}</h2>','<h3 class="all">{{username}}</h3>'].join("")},_onlyContactTemplate:['<img src="{{buddyicon}}">',"<h2>{{realname}}</h2>","<h3>{{username}}</h3>"].join(""),createItem:function(e){var i,s=document.createElement("li"),n=this.options.searchNonContacts&&this.options.showFollowingState?this._template():this._onlyContactTemplate,o=this.options.truncateLength||70;return i=n.replace(/\{\{(\w+)\}\}/g,function(i,s){if("buddyicon"===s)return e[s];if("isContact"===s)return e[s]?"am-following":"";var n=t.flutil.escapeInput(e[s]);return t.Handlebars.helpers.truncate(n,o)}),s.innerHTML=i,s.dataset?(s.dataset=s.dataset,s.dataset.nsid=e.nsid,s.dataset.displayname=e.realname||e.username,s.dataset.pathAlias=e.pathAlias,s.dataset.ispro=e.isPro):(s.setAttribute("data-nsid",e.nsid),s.setAttribute("data-displayname",e.realname||e.username),s.setAttribute("data-path-alias",e.pathAlias),s.setAttribute("data-ispro",e.isPro)),s}},t.mix(i.prototype,t.Localizable),t.ContactSearchBox=i},"@VERSION@",{requires:["api-helper","flutil","handlebars-helpers","flickr-contacts-getListfetcher"],langBundles:["common","photo-page-scrappy"]});YUI.add("hermes-lang-photo-page-scrappy",function(e,o){e.Intl.add("hermes/photo-page-scrappy","en-US",{PAGE_TITLE:["${title}"," | Flickr"],BACK_TO:["Back to ","${entryType}"],COULDNT_UPDATE_SETTINGS:["We couldn't update your settings"],ADULT_CONTENT:["Adult Content"],MATURE_AUDIENCES:["This content is for mature audiences only."],USER_DISCRETION:["User discretion is advised."],SHOW_ME_THIS_CONTENT_TYPE:["Show Me This Content Type From Now On"],CHANGE_SAFE_SEARCH_IN_SETTINGS:['You can always change <a href="/account/prefs/safesearch/?from=privacy"  data-track="photoWellSafeSearchClick">SafeSearch settings</a> in your account preferences.'],SIGNED_IN_FOR_CONTENT:["You must be signed in to see this content."],VIDEO_COMING_SOON:["Video support coming soon"],FIND_OUT_MORE_AD:["Find out more at ","${brand}"],SHARE_THIS_PHOTO:["Share this photo"],DOWNLOAD_THIS_VIDEO:["Download this video"],DOWNLOAD_THIS_PHOTO:["Download this photo"],VIEW_ALL_SIZES:["View all sizes"],DOWNLOAD_PHOTO:["Download photo"],SOME_RIGHTS_RESERVED:["Some rights reserved"],DOWNLOAD:["Download"],ERROR_LOADING_CONTEXT:["Error loading context"],ADD_TITLE:["Add title"],ADD_DESCRIPTION:["Add description"],TITLE_DESCRIPTION_FAILURE:["We couldn't change the Title and Description at this time."],VIEW_PREVIOUS_COMMENT:["View previous comment"],VIEW_MORE_PREVIOUS_COMMENTS:["View ","${count}"," previous comments"],EMPTY_COMMENT_ERROR:["An empty comment box? That won't work!"],COMMENT_RATE_LIMIT_ERROR:["Slow down, partner! To protect the Flickr community against spam and spammy behavior we place a few restrictions on commenting."],COMMENT_POST_ERROR:["We couldn't post your comment."],MORE_COMMENTS_ERROR:["We couldn't get more comments."],COMMENT_PERMALINK_ERROR:["We were unable to find the specified comment on the photo."],DELETE_COMMENT:["Delete Comment"],COMMENT_DELETE_CONFIRMATION:["Are you sure you want to delete this comment?"],COMMENT_DELETE_ERROR:["We couldn't delete your comment."],COMMENT_LOADING_ERROR:["Error loading comments"],COMMENT:["Comment"],SHOW_MORE_COMMENTS:["${count}"," more"],REPLY:["Reply"],PERMALINK:["Permalink"],SINGLE_FAVER:['<a class="faved-by-person-link" href="/photos/',"${pathAlias}",'/">',"${displayName}","</a> faved this"],DOUBLE_FAVER:['<a class="faved-by-person-link" href="/photos/',"${pathAliasOne}",'/">',"${displayNameOne}",'</a> and <a class="faved-by-person-link" href="/photos/',"${pathAliasTwo}",'/">',"${displayNameTwo}","</a> faved this"],TRIPLE_FAVER:['<a class="faved-by-person-link" href="/photos/',"${pathAliasOne}",'/">',"${displayNameOne}",'</a>, <a class="faved-by-person-link" href="/photos/',"${pathAliasTwo}",'/">',"${displayNameTwo}",'</a>, and <a class="faved-by-person-link" href="/photos/',"${pathAliasThree}",'/">',"${displayNameThree}","</a> faved this"],MULTI_FAVER:['<a class="faved-by-person-link" href="/photos/',"${pathAliasOne}",'/">',"${displayNameOne}",'</a>, <a class="faved-by-person-link" href="/photos/',"${pathAliasTwo}",'/">',"${displayNameTwo}",'</a> and <a class="remaining-faved-by" href="#">',"${count}"," more people</a> faved this"],RELATIONSHIP_FRIEND_ERROR:["There was a problem setting your friend relationship."],RELATIONSHIP_FAMILY_ERROR:["There was a problem setting your family relationship."],HIDE_EXIF:["Hide EXIF"],SHOW_EXIF:["Show EXIF"],EDIT_LOCATION:["Edit Location"],EDIT_LOCATION_ORGANIZR:["We’re hard at work redesigning our brand new photo experience. For now, you can Edit Location in Organizr."],SAVE_LOCATION:["Save location"],APERTURE:["Aperture"],FOCAL_LENGTH:["Focal length"],EXPOSURE_TIME:["Exposure time"],FLASH_AUTO_FIRED:["Flash (auto, fired)"],FLASH_AUTO_NO_FIRE:["Flash (auto, did not fire)"],FLASH_ON_FIRED:["Flash (on, fired)"],FLASH_ON_NO_FIRE:["Flash (on, did not fire)"],FLASH_OFF:["Flash (off, did not fire)"],FLASH_SIMPLE_ON:["On"],FLASH_SIMPLE_OFF:["Off"],POWERED_BY:["POWERED BY"],FOURSQUARE:["FOURSQUARE"],ADD_PHOTO_TO_MAP:["Add this photo to your map"],SINGULAR_FAVE:["fave"],PLURAL_FAVE:["faves"],SINGULAR_VIEW:["view"],PLURAL_VIEW:["views"],SINGULAR_COMMENT:["comment"],PLURAL_COMMENT:["comments"],LICENSE_ERROR:["There was a problem changing your photo's license"],ALL_RIGHTS_RESERVED:["All rights reserved"],NO_RESTRICTIONS:["No known copyright restrictions"],PUBLIC_DOMAIN:["Public domain"],USA_GOV_WORK:["United States government work"],SAFETY_CHANGE_ERROR:["There was an error while changing your photo's safety level"],PRIVACY_CHANGE_ERROR:["There was a problem changing your photo's privacy"],COMMENT_PERM_CHANGE_ERROR:["There was an error while changing your photo's commenting permission"],FLAG_PHOTO:["Flag Photo"],MARK_FOR_REVIEW:["Mark for review"],ADDITIONAL_INFO:["Additional info"],VIEWING_THIS_PHOTO:["Viewing this photo"],PRIVACY_UPDATE_ERROR:["There was an error while updating the privacy. Please try again."],META_PERMS_UPDATE_ERROR:["There was an error while updating add meta permission. Please try again."],ADD_META_TO_THIS_PHOTO:["Add tags and people to this photo"],COMMENT_PERMS_UPDATE_ERROR:["There was an error while updating commenting permission. Please try again."],COMMENTING_ON_THIS_PHOTO:["Commenting on this photo"],SAFETY_UPDATE_ERROR:["There was an error while updating the safety level. Please try again."],SAFETY_LEVEL_OF_PHOTO:["Safety level of this photo"],FLAG_ERROR:["There was an error trying to flag this photo. Please try again."],PROVIDE_FEEDBACK:["Provide feedback on the new photo page"],ERROR_DELETING_AUTOTAG:["Error deleting Autotag"],AUTOTAGS:["Autotags"],CONTACT_LIST_ERROR:["An error occurred while trying to fetch your contact list. Please try again."],FAILED_TO_REMOVE_PERSON:["Failed to remove that person from the photo at this time."],PERSON_CANNOT_BE_TAGGED:["This person cannot be tagged."],PEOPLE_IN_PHOTO:["People in photo"],ADD_PEOPLE:["Add people"],ADD_PERSON:["Add a person"],ERROR_REMOVING_FROM_GROUP:["There was a problem removing this photo from the group"],ERROR_ACCEPTING_INVITATION:["There was a problem accepting the group invitation"],SEARCH_GROUPS:["Search groups"],PHOTO_NOT_IN_GROUPS:["This photo is currently not in any groups"],ADD_TO_GROUP:["Add to group"],INVITE_TO_GROUP:["Invite to group"],ONE_GROUP_INVITATION:["You have 1 group invitation"],N_GROUP_INVITATIONS:["You have ","${count}"," group invitations"],VIEW_MORE_GROUPS:["View more groups"],ERROR_REMOVING_FROM_ALBUM:["There was a problem removing this photo from the album"],WARNING_REMOVE_LAST_PHOTO_FROM_ALBUM:["You're about to remove the last photo from an album, which will also delete the album."],REMOVE_PHOTO_AND_ALBUM:["Remove photo and delete album"],ADD_PHOTO_TO_ALBUM:["Add this photo to an album"],SEARCH_ALBUMS:["Search albums"],ADD_TO_ALBUM:["Add to album"],PHOTO_NOT_IN_ALBUMS:["This photo is currently not in any albums"],VIEW_MORE_ALBUMS:["View more albums"],PHOTO_IN_ONE_ALBUM:["This photo is in 1 album"],PHOTO_IN_N_ALBUMS:["This photo is in ","${count}"," albums"],INVITE_PENDING:["Invite pending"],CANCEL_INVITE:["Cancel invite"],ACCEPT_INVITE:["Accept invite"],ONE_ITEM:["1 item"],N_ITEMS:["${count}"," items"],ERROR_REMOVING_FROM_GALLERY:["There was a problem removing this photo from the gallery"],SEARCH_GALLERIES:["Search galleries"],ADD_TO_GALLERY:["Add to gallery"],PHOTO_NOT_IN_GALLERIES:["This photo is currently not in any galleries"],VIEW_MORE_GALLERIES:["View more galleries"],PHOTO_IN_ONE_GALLERY:["This photo is in 1 gallery"],PHOTO_IN_N_GALLERIES:["This photo is in ","${count}"," galleries"],DELETE_PHOTO:["Delete Photo"],PERMANTENTLY_DELETE:["Do you want to permanently delete this photo?"],EDIT_PHOTO:["Edit photo"],NO_VIDEO_ROTATION:["Videos cannot be rotated"],ROTATE:["Rotate"],NO_VIDEO_REPLACE:["Videos cannot be replaced"],REPLACE:["Replace"],PHOTO_NAVIGATION:["Photo navigation"],THUMBNAIL_NAVIGATION:["Thumbnail navigation"],ZOOM:["Zoom"],VIEW_IN_LIGHTBOX:["View in light box"],BACK_TO_CONTEXT:["Back to context"],ADD_TAG:["Add tag"],GO_TO_ORGANIZER:["Go to Organizr"],ALBUM:["album"],ALBUMS:["albums"],ERROR_LOADING_ALBUMS:["There was a problem loading your albums"],ERROR_ADDING_PHOTO_TO_ALBUM:["There was a problem adding this photo to the album"],ERROR_REMOVING_PHOTO_FROM_ALBUM:["There was a problem removing this photo from the album"],ERROR_LOADING_GROUPS:["There was a problem loading the groups you can add photos to"],ERROR_ADDING_TO_GROUP:["There was a problem adding this photo to the group"],ERROR_ADDING_TO_GROUP_NOT_OWNER:["Sorry, the photo couldn't be added to the group because you don't own the photo."],ERROR_ADDING_TO_GROUP_NOT_MEMBER:["Sorry, the photo couldn't be added to the group. You are not a member of the group."],ERROR_ADDING_TO_GROUP_ALREADY_IN_POOL:["The photo is already in that group pool."],ERROR_ADDING_TO_GROUP_MAX_POOLS:["Sorry, the photo couldn't be added to the group because it is already in the maximum number of group pools."],ERROR_ADDING_TO_GROUP_MAX_PHOTOS_FROM_USER:["Sorry, the photo couldn't be added to the group. You have already added the maximum number of photos to the pool."],ERROR_ADDING_TO_GROUP_ADDED_TO_QUEUE:["Your photo has been added to the pending queue for the group."],ERROR_ADDING_TO_GROUP_ALREADY_IN_QUEUE:["Your photo is already in the pending queue for the group."],ERROR_ADDING_TO_GROUP_INVALID_CONTENT:["Sorry, the photo couldn't be added to the group. For more information, check the group requirements for media type, content type, safety level, and geo location."],ERROR_ADDING_TO_GROUP_MAX_IN_POOL:["Sorry, the photo couldn't be added to the group. The group has the maximum number of photos allowed in a pool."],ERROR_INVITING_TO_GROUP:["There was a problem inviting this photo to the group"],ERROR_CANCELING_GROUP_INVITIATON:["There was a problem canceling this photo's invitation to the group"],NO_MATCHES:["No matches"],CREATE_NEW:["Create new"],ERROR_LOADING_GROUP_INVITATIONS:["There was a problem loading this photo's group invitations"],NO_GROUP_INVITATIONS:["No pending group invitations"],PENDING_INVITATIONS_FOR_PHOTO:["Pending invitations for this photo"],LOADING_INVITATIONS:["Loading invitations"],ERROR_LOADING_GALLERIES:["There was a problem loading your galleries"],ERROR_ADDING_TO_GALLERY:["There was a problem adding this photo to the gallery"],ERROR_PHOTO_NOT_ALLOWED_IN_GALLERY:["The owner of this photo does not allow the photo to be added to your gallery"],ERROR_CREATING_GALLERY:["There was a problem creating your new gallery"],DATE_TAKEN_FORMAT:["The taken date must be in the MM/DD/YYYY hh:mm:ss format."],DATE_POSTED_FUTURE:["The posted date cannot be in the future."],DATE_UPLOADED_FUTURE:["The uploaded date cannot be in the future."],DATE_POSTED_FLICKR_JOIN:["Posted date must be after you joined Flickr."],DATE_UPLOADED_FLICKR_JOIN:["Uploaded date must be after you joined Flickr."],ERROR_SAVING_DATE:["Error saving dates"],DATE_INVALID:["One or more dates are invalid"],EDIT_DATES:["Edit Dates"],DATE_TAKEN_ON:["Date Taken On"],DATE_POSTED_ON:["Date Posted On"],DATE_UPLOADED_ON:["Date Uploaded On"],TAKEN_CIRCA:["Taken circa ","${intlDate}"],TAKEN_SOMETIME_IN:["Taken sometime in ","${intlDate}"],TAKEN_IN:["Taken in ","${intlDate}"],TAKEN_ON:["Taken on ",{type:"date",valueName:"intlDate",format:"long"}],UPLOADED_ON:["Uploaded on ","${intlDate}"],SOMETHING_WENT_WRONG:["Something went wrong."],REFRESH_BROWSER:["Please refresh your browser and try again."],TWITTER_NOT_FOUND:["Twitter account not found on posting"],TUMBLR_NOT_FOUND:["Tumblr account not found on posting"],LINK:["Link"],LINK_TO_VIDEO:["Link to this video:"],LINK_TO_PHOTO:["Link to this photo:"],NO_LINKS_FOR_RESTRICTED_VIDEO:["Links are not available for restricted videos"],PRIVATE_VIDEO_SHARE:["This is a private video, do you still want to share it?"],NO_LINKS_FOR_RESTRICTED_PHOTO:["Links are not available for restricted photos"],PRIVATE_PHOTO_SHARE:["This is a private photo, do you still want to share it?"],SHARING_RESTRICTED_VIDEO:["Sharing is restricted for this video"],SHARING_RESTRICTED_PHOTO:["Sharing is restricted for this photo"],EMBED:["Embed"],PUBLIC_TO_SHARE:["Please share this photo publicly to view embed code"],SIZE:["Size:"],TITLE_AND_OWNER_AT_START:["Display title and owner at start"],SHARE_NOW:["Share now!"],SHARE_PHOTO:["Share Photo"],SHARE_ON_TWITTER:["Share on Twitter"],AUTHORIZE_FOR_TWITTER:["please authorize Flickr to post on Twitter"],SHARE_ON_TUMBLR:["Share on Tumblr"],PUBLISH_NOW:["Publish now"],ADD_TO_QUEUE:["Add to queue"],SAVE_AS_DRAFT:["Save as draft"],AUTHORIZE_FOR_TUMBLR:["please authorize Flickr to post on Tumblr"],SHARE_VIA_MAIL:["Share via mail"],SCREEN_NAME_OR_EMAIL:["Screen name or email"],SQUARE:["Square"],SMALL:["Small"],MEDIUM:["Medium"],LARGE:["Large"],ORIGINAL:["Original"],DUPLICATE_TAG:["Duplicate Tag"],INVALID_TAG:["Invalid Tag"],MAXIMUM_TAG_LIMIT:["Maximum tag limit (76) reached"],MAX_TAG_LIMIT:["Maximum tag limit (75) reached"],ERROR_ADDING_TAG:["Error adding tag"],ERROR_DELETING_TAG:["Error deleting tag"],TAGS:["Tags"],ADD_TAGS:["Add tags"],ADD_A_TAG:["Add a tag"],PHOTO_IN_ONE_GROUP:["This photo is in 1 group"],PHOTO_IN_MANY_GROUPS:["This photo is in ",{type:"number",valueName:"count"}," groups"],PHOTO_IN_NO_GROUPS:["This photo is not in any groups"],ADD_A_COMMENT:["Add a comment"],COMMENT_TUTORIAL:["press Enter to post and Shift+Enter for newline"],SIGNED_IN_TO_POST_A_COMMENT:["You must be signed in to post a comment"],SHARE:["Share"],CODE:["Code"],INCLUDE_A_MESSAGE:["Include a message"],FOR_MORE_INFORMATION_SAFESEARCH:['For more information please read <a href="//www.flickr.com/help/photos/?search=flag#145">this FAQ</a>.'],FLAG_CONFIRMATION_SAFE_WITHIN:['This photo is marked as <a href="//www.flickr.com/help/filters/#258">safe</a> and falls within your <a href="//www.flickr.com/account/prefs/safesearch/">SafeSearch settings</a>.'],FLAG_CONFIRMATION_SAFE_OUTSIDE:['This photo is marked as <a href="//www.flickr.com/help/filters/#258">safe</a> and falls outside your <a href="//www.flickr.com/account/prefs/safesearch/">SafeSearch settings</a>.'],FLAG_CONFIRMATION_MODERATE_WITHIN:['This photo is marked as <a href="//www.flickr.com/help/filters/#258">moderate</a> and falls within your <a href="//www.flickr.com/account/prefs/safesearch/">SafeSearch settings</a>.'],FLAG_CONFIRMATION_MODERATE_OUTSIDE:['This photo is marked as <a href="//www.flickr.com/help/filters/#258">moderate</a> and falls outside your <a href="//www.flickr.com/account/prefs/safesearch/">SafeSearch settings</a>.'],FLAG_CONFIRMATION_RESTRICTED_WITHIN:['This photo is marked as <a href="//www.flickr.com/help/filters/#258">restricted</a> and falls within your <a href="//www.flickr.com/account/prefs/safesearch/">SafeSearch settings</a>.'],FLAG_CONFIRMATION_RESTRICTED_OUTSIDE:['This photo is marked as <a href="//www.flickr.com/help/filters/#258">restricted</a> and falls outside your <a href="//www.flickr.com/account/prefs/safesearch/">SafeSearch settings</a>.'],PRIVATE_PHOTO:["Private photo"],PHOTO_UNFIT_FOR_YOUR_EYES:["Photo is unfit for your eyes. Have a kitten: (^._.^)ﾉ"],NO_PHOTO_WITH_THAT_ID:["No photo found with id ","${photoId}"],NO_MEMBERS_FOUND:["No members found"],TAKEN_ON_INTL:["Taken on ",{type:"date",valueName:"intlDate",format:"long"}],UPLOADED_ON_INTL:["Uploaded on ",{type:"date",valueName:"intlDate",format:"long"}],TAKEN_IN_MONTH:["Taken in ",{type:"date",valueName:"intlDate",format:"monthYear"}],VIEW_IN_LIGHTBOX_SHORTCUT:["View in light box"],ZOOM_MAX_MESSAGE:["Whoa there, tiger! This photo is already at maximum size."],CLICK_TO_FAVE_PHOTO:["Click here to fave this photo"],CLICK_TO_FAVE_VIDEO:["Click here to fave this video"],BACK_TO_ACTIVITY_FEED:["Back to activity feed"],BACK_TO_PHOTOSTREAM:["Back to photostream"],BACK_TO_SHARED_PHOTOS:["Back to shared photos"],BACK_TO_ALBUM:["Back to album"],BACK_TO_CONTACTS_LIST:["Back to contacts list"],BACK_TO_FAVORITES:["Back to favorites"],BACK_TO_GALLERY:["Back to gallery"],BACK_TO_PROFILE:["Back to profile"],BACK_TO_EXPLORE:["Back to explore"],BACK_TO_COMMONS:["Back to commons"],BACK_TO_GROUP:["Back to group"],BACK_TO_GROUPS:["Back to groups"],BACK_TO_MAP:["Back to map"],BACK_TO_SEARCH:["Back to search"],BACK_TO_TAG:["Back to tag"],ERROR_ADDING_PHOTOS_TO_ALBUM:["There was a problem adding these photos to the album"],ERROR_REMOVING_PHOTOS_FROM_ALBUM:["There was a problem removing these photos from the album"],ERROR_CREATING_ALBUM:["There was a problem creating your new album"],STRICTER_PRIVACY_CHANGE_DIALOG_TITLE:["Changing to a stricter privacy level"],STRICTER_PRIVACY_CHANGE_DIALOG_MESSAGE:["Changing a photo to a stricter privacy level will remove any favorites that have accumulated. It will also change the URL of the photo."],TAGS_HELPER_TEXT:["Tags are keywords that make photos easier to find. Add as many as you like, and Flickr’s friendly robots will try to help out by adding some for you."],TAGS_HELP_TEXT:["Tags are keywords that make photos easier to find in Flickr search. The ones you add will show up in dark gray. Flickr’s friendly robots will try to help out by adding some for you; these will appear with just a gray outline."],PRIVATE_TAGS_OWNER_HELPER_TEXT:["This private tag is only visible to you and your friends and family who are allowed to see this photo."],PRIVATE_TAGS_FRIENDS_FAMILY_HELPER_TEXT:["This private tag is only visible to you because you are a friend or family of the photo’s owner."],CREATE_WALLART_WITH_PHOTO:["Create wall art with this photo"],ERROR_ROTATING_PHOTO:["There was a problem rotating this photo, please close and retry."],ROTATE_PHOTO:["Rotate photo"],ERROR_REPLACING_PHOTO:["There was a problem replacing this photo, please close and retry."],REPLACE_PHOTO:["Replace photo"],PERMANENTLY_REPLACE:['Permanently replace this photo ("',"${photoTitle}",'" by ',"${username}",") with <em>","${fileName}","</em>?"],REPLACE_WARNING:["Replacing a photo can't be undone. Choose a file to replace this photo with."],REPLACE_UPLOADING:["Uploading <em>","${fileName}","</em>..."],ERROR_DELETING_PHOTO:["There was a problem deleting this photo, please close and retry."],SHOW_MORE_STATS:["Show more stats"],SIGNUP_AND_DOWNLOAD_TITLE:["You found a photo to download!"],SIGNUP_AND_DOWNLOAD_VIDEO_TITLE:["You found a video to download!"],SIGNUP_AND_DOWNLOAD_MESSAGE:["Join Flickr to access billions of photos."],SIGNUP_AND_COMMENT_TITLE:["Comment on this photo!"],SIGNUP_AND_COMMENT_MESSAGE:["Join Flickr to leave a comment on this photo."],IMMERSIFY:["Immersify"],SIGNUP_FOOTER_MESSAGE:["Join Flickr to explore world class photos"],TIMEOUT_FAILURE:["We're having some trouble displaying this photo at the moment. Please try again."],BUY:["Buy"],ADD_A_NOTE:["Add a note"],CONFIRM_NOTE_DELETION:["Are you sure you want to permanently delete this note?"],VIEWING_PRIVACY:["Viewing privacy"],ALLOW_COMMENTING:["Allow commenting"],ALLOW_TAGS_NOTES_PEOPLE:["Allow tags, notes, and people tags"],SAFETY_LEVEL:["Safety level"],SET_SAFETY_LEVEL:["Set safety level"],KEYBOARD_SHORTCUTS:["Keyboard shortcuts"],EDITOR_UPGRADE:["Photo Editor Upgrade"],EDITOR_UPGRADE_MESSAGE:["The edit photo feature on the Flickr photo page is currently disabled pending an upgrade.<br><br>Very shortly, you’ll have access to a more stable, more feature rich photo editor to complement your Flickr experience!<br><br>Sorry for the inconvenience of this unexpected upgrade, but we’re confident it will be worth the wait."],ERROR_REPLACING_PHOTO_FILE_TYPE:["Error replacing photo.  Filetype was unrecognized, please try again with a different photo."],EDITING_DISABLED:["Editing is disabled right now"],ENTER_TO_EDIT_TITLE_DESC:["Press enter to edit title or description."],BACK_TO_PHOTOSTREAM_EDIT:["Back to photostream edit"]})},"@VERSION@",{requires:["intl"]});YUI.add("hermes-template-html5-balls",function(e,a){var l=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,a,l,t,r){return'\n<div class="html5-balls">\n\t<div class="blueball"></div>\n\t<div class="pinkball"></div>\n</div>\n'},useData:!0}),t={};e.Array.each([],function(a){var l=e.Template.get("hermes/"+a);l&&(t[a]=l)}),e.Template.register("hermes/html5-balls",function(a,r){return r=r||{},r.partials=r.partials?e.merge(t,r.partials):t,l(a,r)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-html4-balls",function(e,a){var r=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,a,r,t,l){return'\n<div class="html4-balls"></div>\n'},useData:!0}),t={};e.Array.each([],function(a){var r=e.Template.get("hermes/"+a);r&&(t[a]=r)}),e.Template.register("hermes/html4-balls",function(a,l){return l=l||{},l.partials=l.partials?e.merge(t,l.partials):t,r(a,l)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("html5-balls",function(e){var l,t=!(e.UA.ie&&e.UA.ie<9);l=function(e){return t?"html5-balls":"html4-balls"},e.augment(l,e.Attribute),e.Balls=l},"@VERSION@",{requires:["base","hermes-template-html5-balls","hermes-template-html4-balls","handlebars-helpers","template-base"]});YUI.add("fluid-share-panel-view",function(e,t){function i(e){return e.displayUrl||e.url||e.src}var s=require("hermes-core/flog")(t),a=require("url-parse"),n={},r=["sq","t","q","s","n","m","z","c","b","l","h","k"],l={header:"false",footer:"false",context:"false",vr:"false"};n["embed-code-size-field"]="embed-code-text-field",n["iframe-code-size-field"]="iframe-code-text-field",n["bb-code-size-field"]="bb-code-text-field",e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return this.networkClasses=t.networkClasses||{},this.linkShareParams=t.linkShareParams,this.guestPassParams=t.guestPassParams||{},this.emailShareParams=t.emailShareParams,this.signedOutSharingPerms=t.signedOutSharingPerms||{},this.shareItemCount=t.shareItemCount||1,this.PERMISSIONS=[],this.guestPassParams.canSharePrivate&&this.PERMISSIONS.push({text:this.intlMessage({intlName:"share-modal.SHARE_PRIVATE"}),value:"private"}),!1!==this.guestPassParams.shareNonPublic&&(this.guestPassParams.contentMarkedFriendFamily&&this.PERMISSIONS.push({text:this.intlMessage({intlName:"share-modal.SHARE_FRIENDS_AND_FAMILY"}),value:"family_and_friends"}),this.guestPassParams.contentMarkedFamily&&this.PERMISSIONS.push({text:this.intlMessage({intlName:"share-modal.SHARE_FAMILY"}),value:"family"}),this.guestPassParams.contentMarkedFriends&&this.PERMISSIONS.push({text:this.intlMessage({intlName:"share-modal.SHARE_FRIENDS"}),value:"friends"})),this.guestPassParams.contentMarkedPublic&&this.PERMISSIONS.push({text:this.intlMessage({intlName:"share-modal.SHARE_PUBLIC_ONLY"}),value:"public"}),this.isMine=t.isMine||!1,this.cancel=!1,this.guestPasses={},this.flickrShare={recipients:[],guestpassStr:this.PERMISSIONS[0]?this.PERMISSIONS[0].value:"private"},this.appContext.flipper.isFlipped("enable-share-restyle")&&(l=e.StorageHelper.getItem("embedr-options")?JSON.parse(e.StorageHelper.getItem("embedr-options")):l),t.canVr?l.vr="true":l.vr="false",this},loadState:function(){var t=[],i=this;if(this.appContext.getViewer().nsid&&t.push(this.appContext.getModel("person-models",this.appContext.getViewer().nsid).then(function(e){i.set("me",e)})),this.guestPassParams.shareToAll)Object.keys(this.signedOutSharingPerms).forEach(function(e){i.networkClasses[e].canShare=!0});else if(this.guestPassParams.shareToSpecific)Object.keys(this.guestPassParams.shareToSpecific).forEach(function(e){i.networkClasses[e].canShare=i.guestPassParams.shareToSpecific[e].canShare,i.networkClasses[e].canNotShareTitle=i.guestPassParams.shareToSpecific[e].canNotShareTitle});else{var s={};s[this.emailShareParams.modelName+"_id"]=this.emailShareParams.modelId,this.emailShareParams.modelOwnerId&&(s.owner_id=this.emailShareParams.modelOwnerId),t.push(this._loadSharingPermissionsFromAPI(s))}return e.Promise.all(t)},_loadSharingPermissionsFromAPI:function(e){var t=this;return e.breakCache=(new Date).toISOString(),this.appContext.callAPI("flickr.sharing.canShare",e).then(function(e){e&&e.services&&e.services.service&&e.services.service.forEach(function(e){Object.keys(t.networkClasses).some(function(i){if(t.networkClasses[i].serviceId===e.serviceTypeId){if(t.networkClasses[i].canShare=!!e.canShare,"flickr"===i&&!1===t.appContext.getViewer().signedIn&&(t.networkClasses[i].canShare=!1),e.canShare||(t.networkClasses[i].canNotShareTitle=e.reason.map(function(e){return e.content}).join(", ")),130===e.serviceTypeId&&e.reason&&e.reason.length&&e.reason.some(function(e){return 3===e.code}))return t.cancelMessage=t.intlMessage({intlName:"share-modal.CANCEL_SHARE_BECAUSE_RESTRICTED"}),t.cancel=!0,!0;if(130===e.serviceTypeId){if(t.PERMISSIONS.length&&"public"!==t.PERMISSIONS[t.PERMISSIONS.length-1].value&&(t.guestpassRequired=!0),e.availableGuestpasses){1===e.guestpassRequired&&t.PERMISSIONS.length&&"public"===t.PERMISSIONS[t.PERMISSIONS.length-1].value&&t.PERMISSIONS.shift(),1===e.guestpassRequired&&(t.guestpassRequired=!0,t.guestPassParams=t.guestPassParams||{},t.guestPassParams.contentMarkedPublic=!1,t.guestPassParams.nonPublicWarning=!0);var s=!1,a=!1,n=!1;e.availableGuestpasses.guestpass.forEach(function(e){"friends"===e.content&&(s=!0),"family"===e.content&&(a=!0),"private"===e.content&&(n=!0)});for(var r=0;r<t.PERMISSIONS.length;)"friends"===t.PERMISSIONS[r].value&&!s||"family"===t.PERMISSIONS[r].value&&!a||"family_and_friends"===t.PERMISSIONS[r].value&&!a&&!s||"private"===t.PERMISSIONS[r].value&&!n?t.PERMISSIONS.splice(r,1):r++}else t.PERMISSIONS.length&&"public"===t.PERMISSIONS[t.PERMISSIONS.length-1].value&&(t.PERMISSIONS=[t.PERMISSIONS[0]]);t.flickrShare.guestpassStr=t.PERMISSIONS[0]?t.PERMISSIONS[0].value:"private"}return!0}return!1})})},function(e){s.error("Error reading canShare permissions",{err:e}),Object.keys(t.signedOutSharingPerms).forEach(function(e){t.networkClasses[e].canShare=t.signedOutSharingPerms[e].canShare})})},buildContainer:function(){var t,i=this.guestPassParams.showGuestPassDropdown&&this.isMine&&!!this.guestPassParams.type||!this.guestPassParams.contentMarkedPublic,s="";if(this.cancel)return this.setContainerWithTemplate("fluid-share-panel-error",{errorMessage:this.cancelMessage||this.intlMessage({intlName:"share-modal.CANCEL_SHARE_BECAUSE_ERROR",photoCount:this.guestPassParams.multipleItems?2:1})}),this;if(this.linkShareDisplay=this.generateLinkSharingDisplay(this.linkShareParams),s="macintosh"===e.UA.os?this.intlMessage({intlName:"share-modal.COPY_MAC"}):this.intlMessage({intlName:"share-modal.COPY_PC"}),t={networkClasses:this.networkClasses,linkShareDisplay:this.linkShareDisplay,privacyWarningString:this.linkShareParams.privacyWarningString,downloadAccessString:this.linkShareParams.downloadAccessString,showDownloadWarning:this.linkShareParams.showDownloadWarning,shareItemCount:this.shareItemCount,grabLink:this.guestPassParams.contentMarkedPublic||this.linkShareParams.generateLink?this.linkShareParams.shortURL:null,canHaveGuestpass:i,emailShareParams:this.emailShareParams,showMailPerms:this.guestPassParams.showGuestPassDropdown&&this.isMine&&this.guestPassParams.multipleItems&&this.PERMISSIONS.length>0,nonPublicWarning:this.guestPassParams.nonPublicWarning,grabLinkDefaultPermission:(i&&this.PERMISSIONS.length)>0?this.PERMISSIONS[0].text:"",copyMessage:s,choiceOfPermission:this.PERMISSIONS.length>1,displayOptions:l,showSlideshowOption:void 0!==this.linkShareParams.albumId||void 0!==this.linkShareParams.galleryId,isEdge:this.appContext.getUA().isEdge},this.linkShareDisplay.embedr){var a,n=0,o=e.StorageHelper.getItem("fluid-share-panel-embedr-default-size");this.linkShareDisplay.embedr.sizes.forEach(function(e,t){if(o&&e.sizeKey===o&&(n=t,a=!0),!a){r.indexOf(e.sizeKey)>n&&(n=t)}}),t.defaultSizeStr=this.linkShareDisplay.embedr.sizes[n].sizeStr,t.defaultEmbedrCode=this.linkShareDisplay.embedr.sizes[n].embedCode,e.StorageHelper.setItem("fluid-share-panel-embedr-default-size",this.linkShareDisplay.embedr.sizes[n].sizeKey)}if(this.linkShareDisplay.bbCode){var h,d=0,c=e.StorageHelper.getItem("fluid-share-panel-bbCode-default-size");this.linkShareDisplay.bbCode.sizes.forEach(function(e,t){if(c&&e.sizeKey===c&&(d=t,h=!0),!h){r.indexOf(e.sizeKey)>d&&(d=t)}}),t.defaultBBCode=this.linkShareDisplay.bbCode.sizes[d].embedCode,t.defaultBBCodeSizeStr=this.linkShareDisplay.bbCode.sizes[d].sizeStr}if(this.linkShareDisplay.iframe){var m,u=0,p=e.StorageHelper.getItem("fluid-share-panel-iframe-default-size");this.linkShareDisplay.iframe.sizes.forEach(function(e,t){if(p&&e.sizeKey===p&&(u=t,m=!0),!m){r.indexOf(e.sizeKey)>u&&(u=t)}}),t.defaultIframeSizeStr=this.linkShareDisplay.iframe.sizes[u].sizeStr,t.defaultIframeCode=this.linkShareDisplay.iframe.sizes[u].embedCode}return this.linkShareDisplay.bbCode||this.linkShareDisplay.embedr||this.linkShareDisplay.iframe||(t.hideButtons=!0),t.moveInstructionsUp=t.hideButtons&&!t.canHaveGuestpass&&!t.choiceOfPermission,this.appContext.flipper.isFlipped("enable-share-restyle")?this.setContainerWithTemplate("fluid-share-panel-restyle",t):this.setContainerWithTemplate("fluid-share-panel",t),this},additionalViewClasses:function(){var e=[];return this.appContext.flipper.isFlipped("enable-share-restyle")&&e.push("restyle"),e},activate:function(){var i=this.get("container"),s=this;if(this.registerEventHandler(i.delegate("click",function(e){e.preventDefault(),s.fire("subviewViewEvent","done-sharing")},".done-sharing")),this.guestpassRequired&&this.fire("subviewViewEvent","guestpass-required"),this.cancel)return this;this.dropdowns={},this.linkShareDisplay||(this.linkShareDisplay=this.generateLinkSharingDisplay(this.linkShareParams)),this.registerEventHandler(e.globalEvents.subscribe("window:keydown",function(t){(t.e.ctrlKey||t.e.metaKey)&&67===t.e.keyCode&&e.rapidTracker.beacon(s.name,"linkCopied-"+e.StorageHelper.getItem("fluid-share-panel-first-selected"))})),this.registerEventHandler(i.delegate(["click","keydown"],function(e){"click"!==e.type&&13!==e.keyCode||(e.preventDefault(),s._toggleLinkSelection(e,i))},".link-type-button")),this.registerEventHandler(i.delegate("change",function(e){e.currentTarget.getDOMNode().checked?(i.one(".embed-privacy-container").addClass("hide"),i.one(".embed-options-container").removeClass("hide")):(i.one(".embed-privacy-container").removeClass("hide"),i.one(".embed-options-container").addClass("hide"))},".embed-guestpass-checkbox")),this.registerEventHandler(i.delegate("click",function(e){e.preventDefault(),s._createdDropdownForEmbedIframeBB.bind(s)(e,i)},".embed-size-field")),this.registerEventHandler(i.delegate("click",function(e){e.preventDefault(),s._createGrabLinkPermissionDropdown(e,i)},".grab-link-field")),this.registerEventHandler(i.delegate("click",function(e){e.preventDefault(),s._createMailPermissionDropdown(e,i)},".mail-perm-field")),this.registerEventHandler(i.delegate("click",function(e){s.selectInput(e.target)},".bb-code-text-field, .grab-link-text-field, .embed-code-text-field")),e.use("event-touch",function(e){s.registerEventHandler(e.one("."+t).delegate("touchend",function(e){s.selectInput(e.target)},".bb-code-text-field, .grab-link-text-field, .embed-code-text-field"))}),this.registerEventHandler(i.delegate("click",function(t){s.networkClasses&&t.target.ancestor("."+s.networkClasses.flickr.className,!0)&&(t.preventDefault(),i.one(".share-panels").addClass("show-email-form"),e.rapidTracker.beacon(s.name,"emailTabClick"))},".share-link.sharing-type-enabled")),!this.appContext.flipper.isFlipped("enable-share-restyle")&&i.one(".leave-email-sharing")&&this.registerEventHandler(i.one(".leave-email-sharing").on("click",function(e){e.preventDefault(),i.one(".share-panels").removeClass("show-email-form")})),i.one(".share-by-email")&&this.registerEventHandler(i.one(".share-by-email").on("click",function(e){e.preventDefault(),s._onShareByEmail(e)})),s.appContext.flipper.isFlipped("enable-embedr-in-share")&&s.appContext.flipper.isFlipped("enable-share-restyle")&&this.registerEventHandler(i.delegate("change",function(e){e.halt(),s._updateEmbedrOptions(e)},".embed-options input")),this.setupEmailSharing();var a=this.PERMISSIONS[0].value;if(!this.linkShareParams.generateLink&&((this.appContext.flipper.isFlipped("enable-public-guestpass")||this.guestpassRequired)&&this.isMine&&-1===this.linkShareParams.url.indexOf("favorites")||"public"!==a)){"public"!==a&&i.one(".grab-link-privacy-reminder").removeClass("hide-reminder");var n=[1,1,1];"friends"===a?n=[0,1,0]:"family"===a?n=[1,0,0]:"family_and_friends"===a&&(n=[1,1,0]),this.requestGuestpass.apply(this,n)}if(this.linkShareParams.generateLink&&(i.one(".grab-link-privacy-reminder").removeClass("hide-reminder"),this.generatingLink||(this.generatingLink=!0,this.startGuestpassLoader(),this.fire("subviewViewEvent","generate-link"))),!this.appContext.flipper.isFlipped("enable-share-restyle")){var r=e.OverflowHelper.detectScrollbarSize(e.one("body"));i.one(".message-form")&&i.one(".message-form").setStyle("paddingRight",r+"px"),i.one(".share-by-email")&&i.one(".share-by-email").setStyle("marginRight",r+"px"),i.one(".share-panel-body")&&i.one(".share-panel-body").setStyle("paddingRight",r+"px")}return this.setHighlightWidths(),i.one(".grab-link-download-reminder a").addClass("tabbable"),this},onParentViewEvent:function(t,i){var s=this.get("container"),n=s.one(".grab-link-text-field"),r=e.StorageHelper.getItem("fluid-share-panel-first-selected")||"grabLinkItem";if("flickr-share-error"===i[0])this._onWarning(this.intlMessage({intlName:"share-modal.FLICKR_SHARE_ERROR"}));else if("flickr-share-success"===i[0]){var l=s.one(".fake-input");l.removeClass("not-empty"),l.all(".pill").remove(),s.one(".email-message-text-field").set("value",""),s.one(".email-recipient-text-field").setStyle("width","inherit"),s.one(".share-by-email").set("disabled",!0),this.contacts.resetSearch(),this.to={},this.flickrShare.recipients=[],this._onWarning(this.intlMessage({intlName:"share-modal.FLICKR_SHARE_SUCCESS"}),this.intlMessage({intlName:"share-modal.FLICKR_SHARE_SUCCESS_TITLE"}),!0)}else if("guestpass-created"===i[0]){this.guestPasses[""+i[1]]=i[2],n.set("value",i[2]),"grabLinkItem"===r&&this.selectInput(n),this.endGuestpassLoader();var o=s.one(".embed-code-text-field");if(o){var h=s.one(".embed-code-text-field").get("value"),d=/href=".*?"/,c='href="'+i[2]+'"';o.set("value",h.replace(d,c)),this.linkShareParams.url=a(i[2]).pathname,this.linkShareDisplay.embedr.sizes.forEach(function(e){e.embedCode&&(e.embedCode=e.embedCode.replace(d,c))}),this.linkShareDisplay.embedr.sizes=this.linkShareDisplay.embedr.sizes.filter(function(e){return"o"!==e.sizeKey})}}else"guestpass-failed"===i[0]?(s.one(".grab-link-permission-label")&&s.one(".grab-link-permission-label").set("text",this.intlMessage({intlName:"share-modal.SHARE_PUBLIC_ONLY"})),n.set("value",this.linkShareParams.shortURL),this.endGuestpassLoader(),this._onWarning(this.intlMessage({intlName:"share-modal.GUESTPASS_CREATION_FAILURE"}))):"generated-link"===i[0]&&(s.one(".grab-link-text-field").set("text",i[1]),n.set("value",i[1]),this.selectInput(n),this.endGuestpassLoader())},setHighlightWidths:function(){var t,i,s,a,n=this.get("container"),r=n.one(".link-type-highlight"),l=0,o=n.one(".link-grab-type-button").getDOMNode().offsetLeft,h=e.StorageHelper.getItem("fluid-share-panel-first-selected")||"grabLinkItem";for(t=[{name:"grabLinkItem",element:n.one(".link-grab-type-button")},{name:"embedItem",element:n.one(".embed-type-button")},{name:"iframeItem",element:n.one(".iframe-type-button")},{name:"emailItem",element:n.one(".email-type-button")},{name:"bbCodeItem",element:n.one(".bbcode-type-button")}],this.highlightWidths={},a=0;a<t.length;a++)(s=t[a]).element?(l=parseInt(s.element.get("clientWidth"),10),this.highlightWidths[s.name]={width:l,left:o+"px"},o+=l+24):s.name===h&&(h="grabLinkItem");1===Object.keys(this.highlightWidths).length&&(h="grabLinkItem"),i=t.filter(function(e){return e.name===h})[0].element,r.setStyles(this.highlightWidths[h]),this._toggleLinkSelection({target:i},n)},_toggleLinkSelection:function(t,i){var s,a=i.one(".link-type-highlight"),n=t.target.ancestor(".link-type-buttons",!0).get("children").indexOf(t.target);i.one(".share-link-types").toggleClass("first-stop",0===n).toggleClass("second-stop",1===n).toggleClass("third-stop",2===n).toggleClass("fourth-stop",3===n),t.target.hasClass("link-grab-type-button")?(s=this.highlightWidths.grabLinkItem,this.selectInput(i.one(".grab-link-text-field")),e.StorageHelper.setItem("fluid-share-panel-first-selected","grabLinkItem"),e.rapidTracker.beacon(this.name,"grabLinkTabClick"),this.manageTabbables(".grab-link-only")):t.target.hasClass("embed-type-button")?(s=this.highlightWidths.embedItem,this.linkShareParams.isNonPublic||this.selectInput(i.one(".embed-code-text-field")),e.StorageHelper.setItem("fluid-share-panel-first-selected","embedItem"),e.rapidTracker.beacon(this.name,"embedTabClick")):t.target.hasClass("iframe-type-button")?(s=this.highlightWidths.iframeItem,this.selectInput(i.one(".iframe-code-text-field")),e.StorageHelper.setItem("fluid-share-panel-first-selected","iframeItem"),e.rapidTracker.beacon(this.name,"iframeTabClick")):t.target.hasClass("bbcode-type-button")?(s=this.highlightWidths.bbCodeItem,this.selectInput(i.one(".bb-code-text-field")),e.StorageHelper.setItem("fluid-share-panel-first-selected","bbCodeItem"),e.rapidTracker.beacon(this.name,"bbCodeTabClick")):t.target.hasClass("email-type-button")&&(this.appContext.getViewer().signedIn?(s=this.highlightWidths.emailItem,e.StorageHelper.setItem("fluid-share-panel-first-selected","emailItem"),e.rapidTracker.beacon(this.name,"emailTabClick")):this.fire("subviewViewEvent","confirm-sign-in"),this.manageTabbables(".email-sharing-panel")),a.setStyles(s)},_createDropdown:function(t,i,s,a,n){var r=this;n&&!n.isClosed||((n=new e.Views.FluidDroparound({appContext:this.appContext,showDropArrow:!0,hideModalOverlay:!0,classList:"over-modal",overlayClassList:"over-modal",anchorElement:t.one("."+i+" .dropdown-arrow"),observePageResize:!0,menuItems:s,forceLeft:!0,anchorOffsetHorizontal:16,closeOnResize:!0})).on("selected",function(e){n.close(),a.bind(r)(e),r.setHighlightWidths()}),n.show())},_createdDropdownForEmbedIframeBB:function(t,i){var s,a,l,o;t.target.ancestor(".embed-size-field",!0).hasClass("embed-code-size-field")?(s="embed-code-size-field",a="embedr"):t.target.ancestor(".embed-size-field",!0).hasClass("iframe-code-size-field")?(s="iframe-code-size-field",a="iframe"):t.target.ancestor(".embed-size-field",!0).hasClass("bb-code-size-field")&&(s="bb-code-size-field",a="bbCode"),l=this.linkShareDisplay[a].sizes,o=r.concat(["o"]),this._createDropdown(i,s,Object.keys(l).map(function(e){return{text:l[e].sizeStr,value:l[e].sizeKey}}).sort(function(e,t){return o.indexOf(e.value)<o.indexOf(t.value)?-1:1}),function(t){var r;t&&t.menuItem&&(l.some(function(e){return e.sizeKey===t.menuItem.value&&(r=e.sizeKey,i.one("."+n[s]).set("value",e.embedCode),i.one("."+s).one(".embed-code-label").set("text",e.sizeStr),!0)}),e.StorageHelper.setItem("fluid-share-panel-"+a+"-default-size",r))},this.dropdowns[a])},_createGrabLinkPermissionDropdown:function(e,t){var i=this;this._createDropdown(t,"grab-link-field",this.PERMISSIONS,function(e){if(e&&e.menuItem){var s=e.menuItem.value,a=t.one(".grab-link-text-field"),n=t.one(".grab-link-privacy-reminder");if(t.one(".grab-link-permission-label").set("text",e.menuItem.text),"public"===s)a.set("value",i.linkShareParams.shortURL),n.addClass("hide-reminder");else{var r=0,l=0,o=0;"friends"===s?r=1:"family"===s&&(l=1),"family_and_friends"===s?(l=1,r=1):"private"===s&&(o=1),n.removeClass("hide-reminder"),i.requestGuestpass(l,r,o)}}},this.dropdowns.grabLink)},_createMailPermissionDropdown:function(e,t){var i=this;this._createDropdown(t,"mail-perm-field",this.PERMISSIONS,function(e){e&&e.menuItem&&(t.one(".mail-permission-label").set("text",e.menuItem.text),i.flickrShare.guestpassStr=e.menuItem.value)},this.dropdowns.mail)},_onShareByEmail:function(e){this.fire("subviewViewEvent","share-by-email",{recipients:this.flickrShare.recipients,guestpassStr:this.flickrShare.guestpassStr,message:this.get("container").one(".email-message-text-field").get("value")})},manageTabbables:function(e){var t=this.get("container");t.all(".link-type-content:not("+e+") .tabbable").setAttribute("tabindex","-1"),t.all(e+" .tabbable").setAttribute("tabindex","0")},generateLinkSharingDisplay:function(t){var s=this,a={link:t.url,isNonPublic:t.isNonPublic},n=t.sizes?Object.keys(t.sizes):[];return n.length>0&&t.supportsEmbedr&&(s.appContext.flipper.isFlipped("enable-embedr-in-share")?a.embedr={sizes:Object.keys(t.sizes).map(function(a){return{sizeKey:a,sizeStr:s.getSizeStr(a)+" "+t.sizes[a].width+" × "+t.sizes[a].height,embedCode:s.templates("fluid-share-embedr-code")({embedLink:e.url(t.url),title:t.title,farmURL:e.URLHelper.addProtocolToURL(i(t.sizes[a])),width:t.sizes[a].width,height:t.sizes[a].height,alt:t.title,displayOptions:l,showSlideshowOption:void 0!==s.linkShareParams.albumId||void 0!==s.linkShareParams.galleryId})}})}:(a.embedr={sizes:Object.keys(t.sizes).map(function(a){return{sizeKey:a,sizeStr:s.getSizeStr(a)+" "+t.sizes[a].width+" × "+t.sizes[a].height,embedCode:s.templates("fluid-share-old-html-embed-code")({embedLink:e.url(t.url),title:t.title,authorName:t.author,farmURL:e.URLHelper.addProtocolToURL(i(t.sizes[a])),width:t.sizes[a].width,height:t.sizes[a].height,alt:t.title})}})},a.iframe={sizes:Object.keys(t.sizes).map(function(a){var n;return"/"!==(n=e.config.win.location.href)[n.length-1]&&(n+="/"),n+="player/",{sizeKey:a,sizeStr:s.getSizeStr(a)+" "+t.sizes[a].width+" × "+t.sizes[a].height,embedCode:s.templates("fluid-share-old-iframe-embed-code")({embedLink:n,title:t.title,farmURL:e.URLHelper.addProtocolToURL(i(t.sizes[a])),width:t.sizes[a].width,height:t.sizes[a].height,alt:t.title})}})})),n.length>0&&t.supportsBBCode&&(a.bbCode={sizes:Object.keys(t.sizes).map(function(a){return{sizeKey:a,sizeStr:s.getSizeStr(a)+" "+t.sizes[a].width+" × "+t.sizes[a].height,embedCode:s.templates("fluid-share-bb-code")({title:t.title,farmURL:e.URLHelper.addProtocolToURL(i(t.sizes[a])),shortURL:t.shortURL,authorURL:e.url(t.authorURL),authorName:t.author})}})}),a},getSizeStr:function(e){var t="";return["sq","q"].indexOf(e)>-1?t=this.intlMessage({intlName:"common.SQUARE"}):"t"===e?t=this.intlMessage({intlName:"common.THUMBNAIL"}):["s","n"].indexOf(e)>-1?t=this.intlMessage({intlName:"common.SMALL"}):["m","z","c"].indexOf(e)>-1?t=this.intlMessage({intlName:"common.MEDIUM"}):["l","h","k"].indexOf(e)>-1?t=this.intlMessage({intlName:"common.LARGE"}):"o"===e&&(t=this.intlMessage({intlName:"common.ORIGINAL"})),t},requestGuestpass:function(e,t,i){var s=this.get("container").one(".grab-link-text-field"),a=""+e+t+i;if(this.guestPasses[a])s.set("value",this.guestPasses[a]);else{var n={is_private:i,is_family:e,is_friend:t},r=this.guestPassParams.type,l=this.guestPassParams.id;"photo"===r&&(n.photo=l),"photostream"===r&&(n.photostream=l),"set"===r&&(n.set=l),this.startGuestpassLoader(),this.fire("subviewViewEvent","request-guestpass",a,n)}},startGuestpassLoader:function(){var e=this;setTimeout(function(){if(!e.guestpassLoaded){var t=e.get("container").one(".grab-link-loader");t.setStyle("display","block"),t.addClass("show-loader")}},50)},endGuestpassLoader:function(){var e=this.get("container").one(".grab-link-loader");this.guestpassLoaded=!0,e.removeClass("show-loader"),setTimeout(function(){this.guestpassLoaded&&e.setStyle("display","none")}.bind(this),500)},setupEmailSharing:function(){var t=this.get("container"),i=t.one(".email-recipient-text-field"),s=this.fakeInput=t.one(".fake-input"),a=this.input=this.get("container").one('[data-field="recipient"]'),n=t.one(".email-message-text-field"),r=t.one(".share-by-email"),l=this;this.focus&&(setTimeout(function(){i.focus()},100),this.focus=!1),i&&(this.to={},this.arrow=e.Node.create('<span class="ui-dialog-arrow contact-autocomplete-arrow"></span>'),i.on("focus",function(){s.addClass("focus"),""===a.get("value")?l.contacts.hide():l.contacts.search(),l._adjustInputWidth()}),i.on("blur",function(){a.ancestor(".fake-input").one(".pill")||t.one(".email-recipient-text-field").setStyle("width","inherit")}),a.on("blur",function(){var e,t=!1;(e=l.contacts.selected)&&e.email&&(t=!0,l._makePill(e,t),l.contacts.selected=null,l.get("container").one(".fake-input").insertBefore(a,l.contacts.wrapperEl)),s.removeClass("focus")}),a.on("keydown",function(e){var t,i;8===e.keyCode?(""===this.get("value")&&(i=l.get("container").all(".pill").pop())&&i.fire("remove"),setTimeout(function(){l._adjustInputWidth()},0)):(13===e.keyCode||9===e.keyCode&&!e.shiftKey||32===e.keyCode||188===e.keyCode)&&((t=l.contacts.selected)&&t.email?(e.preventDefault(),l._makePill(t),l.contacts.selected=null,l._arrangeInput()):13!==e.keyCode||l.contacts.selected||(e.preventDefault(),""===this.get("value")&&l.get("container").one('[data-field="message"]').focus()))}),a.on("keypress",function(e){var t=this.get("value");l._adjustInputWidth(t+String.fromCharCode(e.which)),l.contacts._reposition(),this.show()}),a.on("keyup",function(t){0===e.Object.size(l.to)&&""===l.input.get("value")?r.setAttribute("disabled",!0):r.removeAttribute("disabled"),8===t.keyCode&&""===this.get("value")&&l._arrangeInput()}),n.on("keydown",function(e){9!==e.keyCode||e.shiftKey||(e.preventDefault(),r.focus())}),this.appContext.flipper.isFlipped("enable-share-restyle")||n.on("keyup",function(t){var i=""===n.get("value").trim(),s=0===e.Object.size(l.to)&&""===l.input.get("value");i||s?r.setAttribute("disabled",!0):r.removeAttribute("disabled")}),s.delegate("click",function(e){l._arrangeInput()},".fake-input"),s.delegate("mouseover",function(e){var t=e.currentTarget,i=s.get("clientWidth"),a=t.get("offsetLeft"),n=parseInt(t.getComputedStyle("width").replace("px",""),10);l.appContext.flipper.isFlipped("enable-share-restyle")&&(a=t.get("offsetLeft")-s.get("offsetLeft")),i-a-n-10>0?(t.addClass("not-eol"),t.removeClass("end-of-the-line")):(t.removeClass("not-eol"),t.addClass("end-of-the-line"))},".pill"),this.contacts=new e.ContactSearchBox({el:i,appContext:this.appContext,shim:"c-contact-search-shim",signedOut:!this.appContext.getViewer().signedIn,alwaysDownward:!0,DOMContainer:t.one(".share-panel-body").getDOMNode(),loadingState:this.templates(e.Balls())(),onError:function(){i.blur(),l.contacts.hide()},onShow:function(e){var t=l.get("container"),i=l.get("container").one(".contact-list");t.on("click",function(e){"INPUT"!==e.target.get("tagName")&&"block"===i.getStyle("display")&&l.contacts.hide()})},onSelect:function(e,t){e&&e.nsid&&(l._makePill(e),l._arrangeInput())},dialogOffset:function(){var e=l.fakeInput.getDOMNode().getBoundingClientRect(),t=l.input.getDOMNode().getBoundingClientRect();return e.height-t.height+10}}))},_adjustInputWidth:function(t){var i,s,a,n=this.get("container"),r=n.one(".share-by-email"),l=this;return t=t||this.input.get("value"),0===e.Object.size(this.to)&&""===t?((s=n.one(".fake-input")).removeClass("not-empty"),i=s.get("clientWidth"),""!==n.one(".email-message-text-field").get("value").trim()&&r.setAttribute("disabled",!0),this.input.setStyle("width",i-20),setTimeout(function(){l.input.focus()},10),i):((a=e.Node.create('<span class="width-check"></span>')).set("innerHTML",escape(t)),this.get("container").appendChild(a),i=a.get("clientWidth")||0,a.remove(),this.input.setStyle("width",(i||30)+5+"px"),setTimeout(function(){l.input.focus()},10),i)},_makePill:function(e,t){var i,s=escape(e.realname||e.email),a=this.templates("share-modal-mail-pill")({value:s}),n=this.get("container"),r=n.one(".share-by-email"),l=n.one(".fake-input"),o=this;l.addClass("not-empty"),""!==n.one(".email-message-text-field").get("value").trim()&&r.removeAttribute("disabled"),this.to[s]=e,o.completeSameEvent&&o.completeSameEvent.detach(),(i=l.insertBefore(a,this.contacts.wrapperEl)).on("remove",function(t){e.nsid?o.contacts.showInSearch(e.nsid):e.email&&!t&&(o.input.set("value",i.one("span:first-child").get("innerHTML")),o._adjustInputWidth()),delete o.to[s],i.remove(),o.flickrShare.recipients.some(function(t,i){return!!(t.nsid&&t.nsid===e.nsid||!t.nsid&&t.name&&t.name===e.name)&&(o.flickrShare.recipients.splice(i,1),!0)})}),i.delegate("click",function(e){e.stopPropagation(),i.fire("remove",!0),o.input.focus()},".remove-tag"),i.on("dblclick",function(t){t.stopPropagation();var a=o.input;a.set("value",s),o._adjustInputWidth(s),i.replace(a),i.fire("remove"),setTimeout(function(){a.focus()},10),o.contacts.search(),o.completeSameEvent=a.once("blur",function(t){a.get("value")===s&&(o._makePill(e),o.input.set("value",""),o._arrangeInput())})}),e.nsid&&this.contacts.hideFromSearch(e.nsid),this.flickrShare.recipients.push(e),this.input.set("value",""),t||(this.input.focus(),o._adjustInputWidth())},_arrangeInput:function(){var e=this.input;this.get("container").one(".fake-input").insertBefore(e,this.contacts.wrapperEl),setTimeout(function(){e.focus()},10)},_onWarning:function(t,i,s){var a=e.Node.create(this.templates("fluid-warning")({message:t,title:i})),n=e.Node.create("<div></div>"),r=this.get("container"),l=this,o=(r.get("clientWidth")+20)/2-260,h=(r.get("clientHeight")+20)/2-60;a.setStyle("width",500),a.setStyle("height",100),a.setStyle("left",o),a.setStyle("top",h),n.setStyle("left",0),n.setStyle("top",0),n.setStyle("width","100%"),n.setStyle("height","100%"),n.addClass("warning-modal"),r.append(n),n.append(a),n.on("click",function(){n.remove(!0),s&&l.fire("subviewViewEvent","closeAll")})},_updateEmbedrOptions:function(t){var i=t.target.getData("setting"),s=t.target.getDOMNode().checked,a=this.get("container"),r=e.StorageHelper.getItem("fluid-share-panel-embedr-default-size"),o=a.one(".embed-demo-container");l[i]=s?"true":"false",this.linkShareDisplay=this.generateLinkSharingDisplay(this.linkShareParams),this.linkShareDisplay.embedr.sizes.some(function(e){if(e.sizeKey===r)return a.one("."+n["embed-code-size-field"]).set("value",e.embedCode),a.one(".embed-code-size-field").one(".embed-code-label").set("text",e.sizeStr),!0}),"true"===l.header?o.addClass("show-header"):o.removeClass("show-header"),"true"===l.footer?o.addClass("show-footer"):o.removeClass("show-footer"),this.selectInput(a.one(".embed-code-text-field")),e.StorageHelper.setItem("embedr-options",JSON.stringify(l))},selectInput:function(e){e.getDOMNode&&(e=e.getDOMNode()),e.setSelectionRange&&e.setSelectionRange(0,999)}})},"@VERSION@",{requires:["flickr-view","promise","hermes-template-fluid-share-panel","hermes-template-fluid-share-panel-restyle","fluid-droparound-view","hermes-template-fluid-share-embedr-code","hermes-template-fluid-share-bb-code","hermes-template-share-modal-mail-pill","hermes-template-fluid-warning","hermes-template-fluid-share-panel-error","hermes-template-fluid-share-old-html-embed-code","hermes-template-fluid-share-old-iframe-embed-code","fluid-modal-view","contact-search-box","html5-balls","overflow-helper","url-helper","storage-helper"],optionalRequires:["global-events"],langBundles:["share-modal","common"]});YUI.add("hermes-lang-share-modal",function(e,o){e.Intl.add("hermes/share-modal","en-US",{SHARE_ON_BLOGGER:["Share on Blogger"],SHARE_PHOTO:["Share Photo"],SHARE_PHOTOS:["Share photos"],SHARE_VIDEO:["Share Video"],PLEASE_AUTHORIZE_FLICKR_TO_POST_ON_BLOGGER:["please authorize Flickr to post on Blogger"],SHARE_ON_FACEBOOK:["Share on Facebook"],PLEASE_AUTHORIZE_FLICKR_TO_POST_ON_FACEBOOK:["please authorize Flickr to post on Facebook"],SHARE_VIA_MAIL:["Share via mail"],SHARE_ON_TUMBLR:["Share on Tumblr"],PLEASE_AUTHORIZE_FLICKR_TO_POST_ON_TUMBLR:["please authorize Flickr to post on Tumblr"],PUBLISH_NOW:["Publish now"],ADD_TO_QUEUE:["Add to queue"],SAVE_AS_DRAFT:["Save as draft"],SHARE_ON_TWITTER:["Share on Twitter"],PLEASE_AUTHORIZE_FLICKR_TO_POST_ON_TWITTER:["please authorize Flickr to post on Twitter"],SHARE_PHOTOSTREAM:["Share photostream"],SHARE_ALBUM:["Share album"],SHARE_FAVORITES:["Share favorites"],AUTHORIZE_TO_SHARE:["You need to authorize Flickr to share photos on ","${service}"],CONNECT_TO_SERVICE:["Connect to ","${service}"],OK_TAKE_ME_TO_MY_SETTINGS:["OK, take me to my settings"],POST:["Post"],SHARE:["Share"],FRIENDS:["Friends"],FAMILY:["Family"],SCREEN_NAME_OR_EMAIL:["Screen name or email"],INCLUDE_A_MESSAGE:["Include a message"],SHARE_THIS_VIA:["Share this via..."],SHARE_PREFERENCES:["share preferences"],GRAB_THE_LINK:["Grab the link"],SHOW_SHORT_URL:["show short URL"],INCLUDE_CONTENT_MARKED_AS:["Include content marked as:"],PS_ITEMS_NOT_PUBLIC:["Some of the items in your photostream aren't public."],HERE_IS_PS_LINK:["Here's a link to this photostream. Just copy and paste!"],YOU_CAN_ADD_GUEST_PASS:['You can add a Guest Pass [<a class="guest-pass-link" title="',"${title}",'" data-action="follow" href="/help/sharing/#2184">?</a>] so that recipients can view them.'],ADD_A_GUEST_PASS:["Add a guest pass"],GUEST_PASS_COPY:["Guest Passes let you share your photos that aren't public. Anyone can see your public photos anytime, whether they're a Flickr member or not. But! If you want to share photos marked as friends, family or private, use a Guest Pass. If you're sharing photos from a set, you can create a Guest Pass that includes any of your photos marked as friends, family, or private. If you're sharing your entire photostream, you can create a Guest Pass that includes photos marked as friends or family (but not your private photos)."],VISIT_GUESTPASS_HISTORY:['You can visit your <a href="/invite/history/guests/" data-action="follow">Guest Pass history</a> at any time to expire the Guest Pass.'],SOMETHING_WRONG:["Something went wrong.<br>Please refresh your browser and try again."],ERROR:["Error"],OK:["OK"],SHARE_GROUP:["Share Group"],MESSAGE:["Message"],EMAIL:["Email"],SIGN_IN_TO_EMAIL:["You must be signed in to share a photo. Sign in and try again."],LINK_ACCOUNT:["Link Account"],ACCOUNT_SETTINGS:["Account Settings"],AUTHORIZE_FLICKR:["Authorize Flickr to use your account in the Account Settings page."],COPY_TO_CLIPBOARD:["Press Ctrl+C (Win) or Command+C (Mac) to copy this link when selected"],HTML_EMBED:["HTML Embed"],EMAIL_BODY_PHOTOS:["${username}"," shared ",{type:"plural",valueName:"count",options:{one:"${#} photos",other:"${#} photo"}}," with you!"],EMAIL_BODY_ALBUM:["${username}"," shared an album with you!"],EMAIL_BODY_PHOTOSTREAM:["${username}"," shared their photostream with you!"],SHARE_PHOTOS_TO:[{type:"plural",valueName:"count",options:{one:"Share ${#} photo to:",other:"Share ${#} photos to:"}}],SHARE_VIDEO_TO:[{type:"plural",valueName:"count",options:{one:"Share ${#} video to:",other:"Share ${#} videos to:"}}],SHARE_PHOTOSTREAM_TO:["Share photostream to:"],SHARE_ALBUM_TO:["Share album to:"],SHARE_GALLERY_TO:["Share gallery to:"],SHARE_FAVES_TO:["Share favorites to:"],SHARE_ALBUMS_TO:["Share albums to:"],SHARE_GROUP_TO:["Share group to:"],FACEBOOK:["Facebook"],TUMBLR:["Tumblr"],TWITTER:["Twitter"],PINTEREST:["Pinterest"],MAIL:["Mail"],EMBED:["HTML embed"],EMBED_SIMPLE:["Embed"],HTML:["HTML"],GRAB_LINK:["Grab link"],BBCODE:["BBCode"],VIA_FLICKR:["Via Flickr:"],SHARE_PUBLIC_ONLY:["Public photos only"],SHARE_FRIENDS:["Include photos marked Friends"],SHARE_FAMILY:["Include photos marked Family"],SHARE_FAMILY_AND_FRIENDS:["Include photos marked Family & Friends"],SHARE_FRIENDS_AND_FAMILY:["Include photos marked Friends & Family"],SHARE_PRIVATE:["All photos - public and private"],SHARING_DISABLED:["Sharing is disabled"],ON_FLICKR:["on Flickr"],PHOTO_PRIVATE_MESSAGE:['This photo is private. A guest pass [<a target="_blank" href="/help/sharing/">?</a>] will be added to allow recipients to view it.'],PHOTO_FRIENDS_MESSAGE:['This photo is only visible to friends. A guest pass [<a target="_blank" href="/help/sharing/">?</a>] will be added to allow recipients to view it.'],PHOTO_FAMILY_MESSAGE:['This photo is only visible to family. A guest pass [<a target="_blank" href="/help/sharing/">?</a>] will be added to allow recipients to view it.'],PHOTO_FAMILY_FRIENDS_MESSAGE:['This photo is only visible to friends & family. A guest pass [<a target="_blank" href="/help/sharing/">?</a>] will be added to allow recipients to view it.'],PHOTO_CAMERAROLL_MESSAGE:["All photos being shared will be viewable by the recipient(s) regardless of privacy level."],GUESTPASS_CREATION_FAILURE:["There was an error generating the share link.  Please try again."],CONTACT_SEARCH_ERROR:["There was an error when adding a recipient. Please try again."],FLICKR_SHARE_ERROR:["There was an error sharing on Flickr. Please try again."],FLICKR_SHARE_SUCCESS:["Your items have been shared!"],FLICKR_SHARE_SUCCESS_TITLE:["Success"],CLICK_GENERATE_LINK:["Click to generate a shareable link"],FLICKR_SHARE:["Share"],COPY_MAC:["Press Command+C to copy this link when selected"],COPY_PC:["Press Ctrl+C to copy this link when selected"],CANCEL_SHARE_BECAUSE_ERROR:[{type:"plural",valueName:"photoCount",options:{one:"This photo cannot be shared. Please try again later.",other:"These photos cannot be shared. Please try again later."}}],LINK_PRIVACY_REMINDER:[{type:"plural",valueName:"photoCount",options:{one:"The private photo in this selection will remain private. Only people you share this link with will be able to view it.",other:"The private photos in this selection will remain private. Only people you share this link with will be able to view them."}}],PHOTO_PAGE_PRIVACY_WARNING:["This photo will remain private. Only people you share this link with will be able to view it."],CAMERAROLL_PRIVACY_WARNING:[{type:"plural",valueName:"photoCount",options:{one:"This photo will remain private. Only people you share this link with will be able to view it.",other:"Any private photos in this selection will remain private. Only people you share this link with will be able to view them."}}],ALBUM_PRIVACY_WARNING:[{type:"plural",valueName:"photoCount",options:{one:"The private photo in this album will remain private. Only people you share this link with will be able to view it.",other:"Any private photos in this album will remain private. Only people you share this link with will be able to view them."}}],PHOTOSTREAM_PRIVACY_WARNING:[{type:"plural",valueName:"photoCount",options:{one:"The private photo in your photostream will remain private. Only people you share this link with will be able to view it.",other:"Any private photos in your photostream will remain private. Only people you share this link with will be able to view them."}}],CANCEL_SHARE_BECAUSE_RESTRICTED:["Sorry! You can't share restricted photos."],NO_SHAREABLE_ITEMS:["There are no items available to share."],CANT_SHARE_PRIVATE_GROUP_MESSAGE:['Private groups can only be viewed by the group\'s members. <a data-action="follow" href="',"${inviteURL}","\">Invite friends</a> to join the group if you'd like to share it."],CANT_SHARE_PRIVATE_GROUP_TITLE:["Share a Private Group"],EMBEDR_OPTION_HEADER:["Header"],EMBEDR_OPTION_FOOTER:["Footer"],EMBEDR_OPTION_TRUNCATE:["Truncate"],EMBEDR_OPTION_SLIDESHOW:["Slideshow"],EMBEDR_CHANGE_PRIVACY_WARNING:['You\'re trying to embed one of your private photos! If you still want to embed this photo, you can make it public by selecting "Public" from the privacy menu at the bottom this page.'],ALBUM_DOWNLOAD_ACCESS_YOU:[{type:"plural",valueName:"photoCount",options:{one:"Only you will be able to download this photo.",other:"Only you will be able to download these photos."}}],ALBUM_DOWNLOAD_ACCESS_FF:[{type:"plural",valueName:"photoCount",options:{one:"Only your friends and family will be able to download this photo.",other:"Only your friends and family will be able to download these photos."}}],ALBUM_DOWNLOAD_ACCESS_FOLLOWING:[{type:"plural",valueName:"photoCount",options:{one:"Only people you follow will be able to download this photo.",other:"Only people you follow will be able to download these photos."}}],ALBUM_DOWNLOAD_ACCESS_MEMBERS:[{type:"plural",valueName:"photoCount",options:{one:"Only Flickr members will be able to download this photo.",other:"Only Flickr members will be able to download these photos."}}],ALBUM_DOWNLOAD_ACCESS_EVERYONE:[{type:"plural",valueName:"photoCount",options:{one:"Everyone will be able to download this photo.",other:"Everyone will be able to download these photos."}}],CHANGE_DOWNLOAD_PREF:["(<a href='","${url}","'>Change your download preferences</a>)"],EMBED_WITH_GUESTPASS:["Embed this photo with a guestpass"]})},"@VERSION@",{requires:["intl"]});YUI.add("fluid-share-view",function(e,r){var t=require("hermes-core/flog")(r),a={shareRedirectURL:e.url("/window_close.html"),css:{shareBtn:"fluid-share-button",networkClasses:{twitter:{canShare:!1,className:"twitter-link",serviceId:9},facebook:{canShare:!1,className:"facebook-link",serviceId:128},tumblr:{canShare:!1,className:"tumblr-link",serviceId:12},pinterest:{canShare:!1,className:"pinterest-link",serviceId:132},flickr:{canShare:!1,className:"flickr-link",serviceId:130}}}};a.networks={facebook:{clientId:e.config.flickr.facebook.client_id,shareUrl:"https://www.facebook.com/dialog/share?app_id="+e.config.flickr.facebook.client_id+"&display=popup&redirect_uri="+encodeURIComponent(a.shareRedirectURL)+"&href="},twitter:{shareUrl:"https://twitter.com/intent/tweet?text={{tweetText}}&url={{linkToShare}}",hashTags:"#flickr"},tumblr:{shareUrl:"https://www.tumblr.com/widgets/share/tool?caption={{tumblrCaption}}&tags={{tags}}&url={{linkToShare}}"},pinterest:{shareUrl:"https://pinterest.com/pin/create/bookmarklet/?media={{displayPhotoURL}}&url={{linkToShare}}&description={{description}}"},googlePlus:{shareUrl:"https://plus.google.com/share?url="},flickr:{apiCall:"flickr.sharing.post"}},e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this.extraModalClasses=this.extraModalClasses||"","en-us"===this.appContext.lang.toLowerCase()?this.isEnglishLang=!0:this.isEnglishLang=!1,this.errorTitle=this.intlMessage({intlName:"common.OOPS"}),this.errorMessage=this.intlMessage({intlName:"share-modal.NO_SHAREABLE_ITEMS"}),this.removeOverlayOnClose=e.removeOverlayOnClose,this},loadState:function(){return e.Promise.resolve()},buildContainer:function(e){return e=e||{},this.setContainerWithTemplate("fluid-share",e),this},activate:function(){var r=this.get("container"),t="."+a.css.shareBtn,s=r.one(t);return!s||!this.isEnglish&&this.isDisabled||this.registerEventHandler(r.delegate(["click","keydown"],function(r){"click"!==r.type&&13!==r.keyCode||(r.preventDefault(),e.rapidTracker.beacon(this.subClassName,"shareButtonClick"),this.getItemCount().then(function(r){e.rapidTracker.beacon(this.subClassName,"shareButtonClickCount",{count:r})}.bind(this)),this.prepareModal(s))},t,this)),this},prepareModal:function(r){if(!this.shouldCancelModal())return this.getItemCount().then(function(t){return this.isDisabled?e.Promise.resolve(this.showErrorModal()):e.Promise.resolve(this.showModal(r,t,this.removeOverlayOnClose))}.bind(this)).catch(function(e){t.error({err:e})})},showModal:function(r,t,s){var i,n=this,o=this.getIsMine(),l=a.css.networkClasses,c=n.getTitleIntlKey(),h={intlName:"share-modal."+c};return"SHARE_PHOTOS_TO"!==c&&"SHARE_VIDEO_TO"!==c||(h.count=t),(i=new e.Views.FluidModal({appContext:this.appContext,dismissOnOverlayClick:!0,noScroll:!0,hideModalOverlay:!1,maxHeight:!1,showFooter:!1,title:n.intlMessage(h),classList:"modal-restyle "+n.extraModalClasses,width:560,subview:new e.Views["fluid-share-panel-view"]({appContext:n.appContext,networkClasses:l,linkShareParams:this.prepareLinkShareParameters(),guestPassParams:this.getGuestPassParams(),emailShareParams:this.prepareFlickrShareParameters(),isMine:o,shareItemCount:t,signedOutSharingPerms:this.getSignedOutSharingPerms(),canVr:this.get("canVr")}),removeOverlayOnClose:s})).registerEventHandler(i.get("container").delegate(["click","keydown"],function(e){"click"!==e.type&&13!==e.keyCode||(e.preventDefault(),e.target.ancestor("."+l.facebook.className,!0)?n.preProcessShare(n.prepareFacebookShareParameters,n.shareToFacebook):e.target.ancestor("."+l.twitter.className,!0)?n.preProcessShare(n.prepareTwitterShareParameters,n.shareToTwitter):e.target.ancestor("."+l.tumblr.className,!0)?n.preProcessShare(n.prepareTumblrShareParameters,n.shareToTumblr):e.target.ancestor("."+l.pinterest.className,!0)&&n.preProcessShare(n.preparePinterestShareParameters,n.shareToPinterest))},".share-link.sharing-type-enabled")),i.on("share-by-email",function(r){var t=e.merge(n.prepareFlickrShareParameters(),r);n.shareToFlickr(i,t)}),i.on("done-sharing",function(r){i.close(),n.guestPassURLs={},e.rapidTracker.beacon(this.subClassName,"doneSharingClick")}),i.on("request-guestpass",function(e,r,t){n.requestGuestpass(i,r,t,!0)}),i.on("generate-link",function(){n.generateLink().then(function(e){i.fire("parentViewEvent","generated-link",e)})}),i.on("activated",function(){i.get("subview").cancel&&i.get("container").one(".title").setHTML(n.intlMessage({intlName:"common.OOPS"})),i.reposition()}),i.on("guestpass-required",function(){n.guestpassRequired=!0}),i.on("confirm-sign-in",function(){i.close();var r=new e.Views.FluidModal({appContext:n.appContext,title:n.intlMessage({intlName:"common.OOPS"}),message:n.intlMessage({intlName:"share-modal.SIGN_IN_TO_EMAIL"}),actionButtonLabel:n.intlMessage({intlName:"common.OK"}),classList:"sharing-sign-out-modal",showCancelButton:!0});r.on("actionClick",function(){e.StorageHelper.setItem("signedOutEmailSharing",new Date),e.SigninHelper.addPendingShare({shareType:"email"})}),setTimeout(function(){r.show()},10)}),i.on("close",function(){n.fire("sharePresentationClose"),n.guestPassURLs={},e.rapidTracker.beacon(n.name,"shareModalCancelClick")}),i.on("closeAll",function(){n.fire("sharePresentationClose"),i.close(),n.guestPassURLs={}}),i.show(),this.sharePresentation=i,i},showErrorModal:function(){var r=new e.Views.FluidModal({appContext:this.appContext,dismissOnOverlayClick:!0,showCancelButton:!1,noScroll:!0,hideModalOverlay:!1,showFooter:!0,title:this.errorTitle,message:this.errorMessage});return r.show(),r},prepareFacebookShareParameters:function(){return{url:"",count:1}},prepareTwitterShareParameters:function(){return{shortURL:"",url:"",title:"",count:1}},prepareTumblrShareParameters:function(){return{title:"",authorURL:"",ownerName:"",description:"",displayPhotoURL:"",url:"",count:1}},preparePinterestShareParameters:function(){return{title:"",description:"",displayPhotoURL:"",shortURL:"",url:"",count:1}},prepareGooglePlusShareParameters:function(){return{url:"",count:1}},prepareFlickrShareParameters:function(){return{modelName:"",modelId:"",title:"",url:"",count:1}},prepareLinkShareParameters:function(){return{sizes:{},url:"",title:"",author:"",authorURL:"",shortURL:"",supportsEmbedr:!1,supportsBBCode:!1,privacyWarningString:"",generateLink:!1}},getTitleIntlKey:function(){return"SHARE_PHOTOS_TO"},getItemCount:function(){return e.Promise.resolve(1)},getIsMine:function(){return!1},getGuestPassParams:function(){return{type:null,id:null,contentMarkedFriends:!0,contentMarkedFamily:!0,contentMarkedFriendFamily:!0,contentMarkedPublic:!0,canSharePrivate:!1,sharingEntirelyNotPublic:!1,multipleItems:!1,nonPublicWarning:null,shareToAll:!1,showGuestPassDropdown:!1,shareToSpecific:null}},getSignedOutSharingPerms:function(){return{facebook:{canShare:!0},twitter:{canShare:!0},tumblr:{canShare:!0},pinterest:{canShare:!0},flickr:{canShare:!1}}},shouldCancelModal:function(){return!1},shareToFacebook:function(r,s){if(!r.url)return t.error("Error sharing to Facebook.  Missing url.");var i,n,o,l,c,h=encodeURIComponent(e.url(r.url)),u=this.guestPassURLs;this.guestpassRequired&&u&&(n=u[100],o=u["010"],l=u[110],c=u[111],o&&(h=o),n&&(h=n),l&&(h=l),c&&(h=c)),i=a.networks.facebook.shareUrl+h,e.rapidTracker.beacon(this.get("parentViewName"),"shareNetworkClick",{type:"facebook",count:r.count||1}),s?s.location.replace(i):s=this.createSharePopup(i),this.trackShareCompletion(s)},shareToTwitter:function(r,s){if(void 0===r.url||null===r.url)return t.error("Error sharing to Twitter.  Missing url.");if(!r.title)return t.error("Error sharing to Twitter.  Missing title.");var i,n,o,l,c=r.title;n=""===r.url?"":encodeURIComponent(r.url),(l=c+" "+a.networks.twitter.hashTags).length+n.length>140&&(o=l.length+n.length-140,l=c.substring(0,c.length-(o+1))+"… "+a.networks.twitter.hashTags),i=a.networks.twitter.shareUrl.replace("{{tweetText}}",encodeURIComponent(l)).replace("{{linkToShare}}",n),s?s.location.replace(i):s=this.createSharePopup(i),e.rapidTracker.beacon(this.get("parentViewName"),"shareNetworkClick",{type:"twitter",count:r.count||1}),this.trackShareCompletion(s)},shareToTumblr:function(r,s){if(!r.title)return t.error("Error sharing to Tumblr.  Missing title.");if(!r.displayPhotoURL)return t.error("Error sharing to Tumblr.  Missing displayPhotoURL.");var i,n,o,l,c,h=r.title,u=r.tags||"",p=r.description,d=e.URLHelper.addProtocolToURL(r.displayPhotoURL),g=r.isPhotoPage,m=a.networks.tumblr.shareUrl;g&&this.appContext.flipper.isFlipped("enable-tumblr-embed-share")||(m+="&shareSource=legacy&posttype=photo&content={{displayPhotoURL}}&clickthroughUrl={{linkToShare}}"),r.authorURL&&(n=e.url(r.authorURL)),r.ownerName&&(o=r.ownerName),l=0===r.url.indexOf("https://")?r.url:0===r.url.indexOf("//")?e.URLHelper.addProtocolToURL(r.url):e.url(r.url),i=this.templates("fluid-share-tumblr-post")({title:h,ownerURL:n,ownerName:o,description:p,linkToShare:l}),c=m.replace("{{displayPhotoURL}}",encodeURIComponent(d)).replace("{{tumblrCaption}}",encodeURIComponent(i)).replace(/{{linkToShare}}/g,encodeURIComponent(l)).replace("{{tags}}",encodeURIComponent(u)),e.rapidTracker.beacon(this.get("parentViewName"),"shareNetworkClick",{type:"tumblr",count:r.count||1}),s?s.location.replace(c):s=this.createSharePopup(c,!0)},shareToPinterest:function(r,s){if(!r.title)return t.error("Error sharing to Pinterest.  Missing title.");if(!r.displayPhotoURL)return t.error("Error sharing to Pinterest.  Missing displayPhotoURL.");if(!r.url)return t.error("Error sharing to Pinterest.  Missing url.");if(!r.shortURL)return t.error("Error sharing to Pinterest.  Missing shortURL.");var i,n,o,l=e.Handlebars.helpers.stripTags(r.description)||"",c=r.shortURL,h=r.title,u=e.URLHelper.addProtocolToURL(r.displayPhotoURL);n=encodeURIComponent(e.url(r.url)),o=""!==l.trim()?c+" | "+h+" | "+l:c+" | "+h,u=u.replace("https:","http:"),n=n.replace("https:","http:"),i=a.networks.pinterest.shareUrl.replace("{{displayPhotoURL}}",encodeURIComponent(u)).replace("{{description}}",encodeURIComponent(o)).replace("{{linkToShare}}",n),e.rapidTracker.beacon(this.get("parentViewName"),"shareNetworkClick",{type:"pinterest",count:r.count||1}),s?s.location.replace(i):s=this.createSharePopup(i,!0)},shareToGooglePlus:function(r,s){if(!r.url)return t.error("Error sharing to GooglePlus.  Missing url.");var i,n;n=encodeURIComponent(e.url(r.url)),i=a.networks.googlePlus.shareUrl+n,e.rapidTracker.beacon(this.get("parentViewName"),"shareNetworkClick",{type:"googlePlus",count:r.count||1}),s?s.location.replace(i):s=this.createSharePopup(i)},shareToFlickr:function(r,s){if(!s.recipients)return t.error("Error sharing to Flickr.  Missing recipients.");if(!s.url)return t.error("Error sharing to Flickr.  Missing url.");if(!s.modelName)return t.error("Error sharing to Flickr.  Missing modelName.");if(!s.modelId)return t.error("Error sharing to Flickr.  Missing modelId.");var i,n,o=s.modelName,l=s.modelId,c=s.recipients,h=s.message||"",u=s.guestpassStr||"public",p={},d=[],g=[];encodeURIComponent(e.url(s.url)),"share_code"===o?p[o]=l:p[o+"_id"]=l,p.service_type_id="130",p.owner_id=this.appContext.getViewer().nsid,"public"!==u&&("friends"!==u&&"family_and_friends"!==u||(p.guestpass_friends="1"),"family"!==u&&"family_and_friends"!==u||(p.guestpass_family="1"),"private"===u&&(p.guestpass_private="1",p.guestpass_friends="1",p.guestpass_family="1"));for(i in c)(n=c[i]||{}).email?d.push(n.email):n.nsid&&g.push(n.nsid);p.to_flickr=g.join(","),p.to_email=d.join(","),p.message=e.flutil.escapeInput(h),e.rapidTracker.beacon(this.get("parentViewName"),"shareNetworkClick",{type:"flickr",count:s.count||1,flkcnt:g.length,emailcnt:d.length});var m=e.StorageHelper.getItem("signedOutEmailSharing");if(m){var f;try{(f=e.moment(m)).isValid()&&(new e.moment).diff(f,"hours")<2&&(e.rapidTracker.beacon(this.get("parentViewName"),"signedOutEmailShare",{count:s.count||1}),e.StorageHelper.remove("signedOutEmailSharing"))}catch(e){}}if(!a.networks)throw new Error("Missing sharing api configuration.");this.appContext.callAPI(a.networks.flickr.apiCall,p).then(function(){r&&r.fire("parentViewEvent","flickr-share-success")},function(e){r&&r.fire("parentViewEvent","flickr-share-error")})},generateLink:function(){var r=this;return this.onBeforeShare().then(function(e){return e},function(t){r.sharePresentation.fire("closeAll"),setTimeout(function(){new e.Views.FluidModal({appContext:r.appContext,title:r.intlMessage({intlName:"common.OOPS"}),message:r.intlMessage({intlName:"share-modal.CANCEL_SHARE_BECAUSE_ERROR",photoCount:r.getGuestPassParams.multipleItems?10:1}),actionButtonLabel:r.intlMessage({intlName:"common.OK"}),classList:"sharing-failure-modal",showCancelButton:!1}).show()},10)})},preProcessShare:function(e,r){var a=this;if(this.onBeforeShare){var s=this.createSharePopup("",!0);try{s.document.body.innerHTML=a.templates("fluid-share-loading-state")()}catch(e){18===e.code&&(s.close(),(s=this.createSharePopup("",!0)).document.body.innerHTML=a.templates("fluid-share-loading-state")())}this.onBeforeShare().then(function(i){var n;try{n=e.call(a)}catch(e){t.error("Error getting share parameters",{err:e})}r.call(a,n,s)})}else{var i;try{i=e.call(a)}catch(e){t.error("Error getting share parameters",{err:e})}r.call(a,i)}},trackShareCompletion:function(r){var a=function(s){if(s.source===r)if(s.origin===e.url("/")&&"Window closed"===s.data)t.log("Closing Facebook window."),e.rapidTracker.beacon(this.get("parentViewName"),"photoSharedToFacebook"),e.config.win.removeEventListener("message",a,!1);else if(s.origin===e.url("/")&&0===s.data.indexOf("share failure"))t.error("Got Facebook error",{data:s.data}),e.config.win.removeEventListener("message",a,!1);else if("https://twitter.com"===s.origin&&"__ready__"!==s.data)try{t.log("Tracking share completion",{data:s.data}),"tweet"===JSON.parse(s.data).params[0]&&s.returnValue&&(e.rapidTracker.beacon(this.get("parentViewName"),"photoSharedToTwitter"),e.config.win.removeEventListener("message",a,!1))}catch(e){t.error("Error tracking share completion",{err:e})}};e.config.win.addEventListener("message",a,!1)},createSharePopup:function(r,t){var a={},s="",i="nativeShare"+(new Date).getTime();return a.width=t?950:640,a.height=480,a.top=(e.config.win.screen.height-a.height)/2,a.left=(e.config.win.screen.width-a.width)/2,e.Object.each(a,function(e,r){s+=r+"="+e+","}),s=s.slice(0,-1),e.config.win.open(r,i,s)},requestGuestpass:function(e,r,t,a){var s=this;this.guestPassURLs||(this.guestPassURLs={}),this.guestPassURLs[r]?e.fire("parentViewEvent","guestpass-created",r,this.guestPassURLs[r]):this.appContext.callAPI("flickr.sharing.createGuestpass",t).then(function(t){if(!t||!t.guestpass||!t.guestpass.url)throw new Error("No guestpass returned");s.guestPassURLs[r]=t.guestpass.url,e.fire("parentViewEvent","guestpass-created",r,s.guestPassURLs[r])},function(i){a?s.requestGuestpass(e,r,t):e.fire("parentViewEvent","guestpass-failed",i)})}},{ATTRS:{parentViewName:{value:""}}})},"@VERSION@",{requires:["flickr-view","flickr-promise","fluid-modal-view","hermes-template-fluid-share","hermes-template-fluid-share-tumblr-post","hermes-template-fluid-share-loading-state","fluid-share-panel-view","url","flutil","url-helper","signin-helper","handlebars-helpers"],optionalRequires:["fluid"],langBundles:["share-modal","common"]});YUI.add("fluid-share-album-view",function(e,t){var a=require("hermes-core/flog")(t);e.namespace("Views").FluidShareAlbumView=e.FlickrView.create(this.name,e.namespace("Views")["fluid-share-view"],[],{langBundles:this.details.langBundles,subClassName:t,initializer:function(e){return this.albumId=e.albumId,this.constructor.superclass.buildContainer.call(this,{extraShareButtonIconClassList:"share-album-icon",sharingDisabled:!0,shareTooltip:this.intlMessage({intlName:"share-modal.SHARE_ALBUM"})}),this.constructor.superclass.initializer.call(this,e)},loadState:function(){return e.Promise.resolve()},getItemCount:function(){return this.loadRequiredModels()},loadRequiredModels:function(){var t=this;return e.Promise.all([this.appContext.getModel("set-models",this.albumId+"-1",{filter:1,perPage:5,page:1}),this.appContext.getModel("album-privacy-models",this.albumId),this.appContext.getModel("set-models",this.albumId)]).then(function(e){t.set("albumModel",e[0]),t.set("privacyModel",e[1]),t.isDisabled=0===e[0].getValue("canShare"),t.set("photos",e[0].getValue("photoPageList").getList()),t.set("fullAlbum",e[2]),e[2].on("valuesChanged",function(e){var a={};e&&(Object.keys(e).forEach(function(l){var r=e[l];r.id===t.albumId&&(a[l]=r.newVal)}),Object.keys(a).length>0&&t.get("albumModel").setValues(a))})},function(e){a.error("failed to get models",{err:e})})},buildContainer:function(){return this.constructor.superclass.buildContainer.call(this,{extraShareButtonIconClassList:"share-album-icon",sharingDisabled:this.isDisabled,shareTooltip:this.intlMessage({intlName:"share-modal.SHARE_ALBUM"})}),this},prepareFacebookShareParameters:function(){return{url:this.get("albumModel").getValue("url")}},prepareTwitterShareParameters:function(){var t=this.get("fullAlbum");return{url:e.URLHelper.getShortAlbumURL(t.getValue("normalizedId")),title:t.getValue("title")}},prepareTumblrShareParameters:function(){var e=this.get("fullAlbum");return{title:e.getValue("title"),authorURL:e.getValue("owner").getValue("url"),ownerName:e.getValue("owner").getValue("displayname"),description:e.getValue("description"),displayPhotoURL:this.get("photos").map(function(e){return e.getLargestSize().url}),url:e.getValue("url"),tags:"Flickr"}},preparePinterestShareParameters:function(){var t=this.get("fullAlbum");return{title:t.getValue("title"),description:t.getValue("description"),displayPhotoURL:this.get("photos").length>0?this.get("photos")[0].getLargestSize().url:null,shortURL:e.URLHelper.getShortAlbumURL(t.getValue("normalizedId")),url:t.getValue("url"),count:1}},prepareFlickrShareParameters:function(){var e=this.get("fullAlbum");return{modelName:"set",modelId:this.albumId,modelOwnerId:e.getValue("owner").id,title:e.getValue("title"),url:e.getValue("url"),count:1}},prepareLinkShareParameters:function(){var t,a,l,r=this.get("albumModel"),i=this.get("fullAlbum"),s=!1;if(t=this.intlMessage({intlName:"share-modal.ALBUM_PRIVACY_WARNING",photoCount:i.getValue("totalCount")}),this.appContext.flipper.isFlipped("enable-album-download")&&i.getValue("owner").getValue("isMe")){switch(s=!0,this.appContext.getViewer().prefs.downloadAccessPref){case 4:l="ALBUM_DOWNLOAD_ACCESS_YOU";break;case 3:l="ALBUM_DOWNLOAD_ACCESS_FF";break;case 2:l="ALBUM_DOWNLOAD_ACCESS_FOLLOWING";break;case 1:l="ALBUM_DOWNLOAD_ACCESS_MEMBERS";break;case 0:l="ALBUM_DOWNLOAD_ACCESS_EVERYONE"}l&&(a=this.intlMessage({intlName:"share-modal."+l,photoCount:i.getValue("totalCount")}))}return{sizes:r.getValue("primaryPhotoSizes"),url:i.getValue("url"),title:i.getValue("title"),author:i.getValue("owner").getValue("displayname"),authorURL:i.getValue("owner").getValue("url"),albumId:r.getValue("normalizedId"),shortURL:e.URLHelper.getShortAlbumURL(i.getValue("normalizedId")||i.getValue("id")),supportsEmbedr:2===i.getValue("canShare")&&this.appContext.flipper.isFlipped("enable-embedr-in-share")&&this.appContext.flipper.isFlipped("enable-embedr-in-albums"),supportsBBCode:!1,privacyWarningString:t,showDownloadWarning:s,downloadAccessString:a}},getTitleIntlKey:function(){return"SHARE_ALBUM_TO"},getGuestPassParams:function(){var e=this.get("privacyModel"),t=this.get("fullAlbum").getValue("owner").getValue("isMe"),a=e.getValue("countPhotosPublic"),l=e.getValue("countPhotosFriendFamily"),r=e.getValue("countPhotosFriend"),i=e.getValue("countPhotosFamily"),s=this.get("privacyModel").getValue("totalCount")-a,u=t&&l>0&&l!==a,o=t&&r>0&&r!==a,n=t&&i>0&&i!==a,d=!1;return u&&r===l&&(o=!1),u&&i===l&&(n=!1),(s>0||u||n||o)&&(d=!0),{type:"set",id:this.get("albumModel").getValue("normalizedId"),contentMarkedFriends:o,contentMarkedFamily:n,contentMarkedFriendFamily:u,contentMarkedPublic:a,canSharePrivate:d&&t,showGuestPassDropdown:t&&a!==this.get("fullAlbum").getValue("totalCount"),multipleItems:!0}},getIsMine:function(){return this.get("albumModel").getValue("isOwner")}})},"@VERSION@",{requires:["flickr-view","flickr-promise","fluid-share-view","url-helper"],langBundles:[]});YUI.add("hermes-template-album-list-toolbar",function(a,e){var l=a.Template.Handlebars.revive({1:function(a,e,l,s,n){var t,i=null!=e?e:{},r=l.helperMissing,c=a.escapeExpression;return'\t\t<a class="create-album" href="/photos/organize/?start_tab=new_set"><i></i><span>'+c((l.intlMessage||e&&e.intlMessage||r).call(i,{name:"intlMessage",hash:{intlName:"album-page.NEW_ALBUM"},data:n}))+'</span></a>\n\t\t<div class="divider"></div>\n\t\t<a class="create-collection" href="/photos/organize/?start_tab=sets"><i></i><span>'+c((l.intlMessage||e&&e.intlMessage||r).call(i,{name:"intlMessage",hash:{intlName:"album-page.NEW_COLLECTION"},data:n}))+'</span></a>\n\t\t<a class="view-collections" href="'+c(a.lambda(null!=(t=null!=e?e.urls:e)?t.collections:t,e))+'"><span>'+c((l.intlMessage||e&&e.intlMessage||r).call(i,{name:"intlMessage",hash:{intlName:"album-page.VIEW_MY_COLLECTIONS"},data:n}))+"</span></a>\n"},3:function(a,e,l,s,n){var t,i=a.escapeExpression;return'\t\t<a class="view-collections" href="'+i(a.lambda(null!=(t=null!=e?e.urls:e)?t.collections:t,e))+'"><span>'+i((l.intlMessage||e&&e.intlMessage||l.helperMissing).call(null!=e?e:{},{name:"intlMessage",hash:{intlName:"album-page.VIEW_COLLECTIONS"},data:n}))+"</span></a>\n"},compiler:[7,">= 4.0.0"],main:function(a,e,l,s,n){var t;return'<div class="album-toolbar-content">\n'+(null!=(t=l.if.call(null!=e?e:{},null!=e?e.isViewingSelf:e,{name:"if",hash:{},fn:a.program(1,n,0),inverse:a.program(3,n,0),data:n}))?t:"")+"</div>\n"},useData:!0}),s={};a.Array.each([],function(e){var l=a.Template.get("hermes/"+e);l&&(s[e]=l)}),a.Template.register("hermes/album-list-toolbar",function(e,n){return n=n||{},n.partials=n.partials?a.merge(s,n.partials):s,l(e,n)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("album-list-toolbar-view",function(i){i.FlickrView.create(this.name,i.FlickrView,[],{langBundles:this.details.langBundles,subviewConfig:{},initializer:function(i){return""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this.nsid=i.nsid,this},loadState:function(){return this.appContext.getModel("person-models",this.nsid).then(function(i){this.set("person",i),this.set("isViewingSelf",this.nsid===this.appContext.getViewer().nsid)}.bind(this),function(i){})},buildContainer:function(){var t=this.get("person")&&i.URLHelper.generatePersonUrls(this.get("person"));return this.setContainerWithTemplate("album-list-toolbar",{urls:t,isViewingSelf:this.get("isViewingSelf")}),this},buildErrorContainer:function(){},activate:function(){return this}})},"@VERSION@",{requires:["flickr-view","url-helper","hermes-template-album-list-toolbar"],optional:[],langBundles:["album-page","common"]});YUI.add("photolist-aft-helper",function(t){"use strict";t.PhotolistAftHelper=function(t,e){var i=t.onSubviewEvent;this.appContext=t.appContext,this.viewName=t.name,this.container=t.get("container"),e&&(this.hasRequiredSubviews=!0,this.paftResults={},e.forEach(function(t){this.paftResults[t]={}}.bind(this))),YUI.Env.isServer||this.appContext.clientMetrics.setPendingMeasurement(t.name,!0),t.onSubviewEvent=function(e,s){(s&&"atfVisible"===s[0]||"atfActivated"===s[0])&&this.aftHelper.handleAFTResult(e,s),i&&i.call(t,e,s)}},t.PhotolistAftHelper.prototype.handleAFTResult=function(t,e){var i=e[0];if(this.hasRequiredSubviews){if(e.length>2&&this.container){var s=this.container.one("."+e[2]);if(s&&!(function(t){var e=(t=t.getDOMNode()).getBoundingClientRect();return e.top>=window.pageYOffset&&e.left>=window.pageXOffset})(s))return delete this.paftResults[e[2]],void this.beaconIfAllAFTResultsComplete(i)}t=e[2]}this.paftResults||(this.paftResults={},this.hasRequiredSubviews||(this.paftResults[t]={})),this.paftResults[t][i]=e[1]||(new Date).getTime(),this.beaconIfAllAFTResultsComplete(i)},t.PhotolistAftHelper.prototype.beaconIfAllAFTResultsComplete=function(e){var i,s=0;this.allResultsReceived||(this.allResultsReceived=Object.keys(this.paftResults).every(function(t){return void 0!==(i=this.paftResults[t][e])&&(i>s&&(s=i),!0)}.bind(this)),this.allResultsReceived&&"atfVisible"===e&&(this.appContext.hasClientSideRouted()?(this.appContext.clientMetrics.mark("AFT_CL",s),this.appContext.clientMetrics.mark("AFT",s)):(t.config.win.performance&&t.config.win.performance.timing&&(s-=t.config.win.performance.timing.navigationStart),this.appContext.clientMetrics.record("AFT_SV",s),this.appContext.clientMetrics.record("AFT",s)),this.appContext.clientMetrics.setPendingMeasurement(this.viewName,!1),this.appContext.clientMetrics.beacon()))}},"@VERSION@",{affinity:"",requires:["flickr-promise","event-custom"]});YUI.add("hermes-template-head-meta",function(e,a){var n=e.Template.Handlebars.revive({1:function(e,a,n,t,r){return'name="'},3:function(e,a,n,t,r){return'property="'},5:function(e,a,n,t,r){return'description="'+e.escapeExpression(e.lambda(a,a))+'"'},compiler:[7,">= 4.0.0"],main:function(e,a,n,t,r){var l,i,m,s=null!=a?a:{},o=n.helperMissing,p=e.escapeExpression,u="<meta "+(null!=(l=n.if.call(s,null!=a?a.isName:a,{name:"if",hash:{},fn:e.program(1,r,0),inverse:e.program(3,r,0),data:r}))?l:"")+p("function"==typeof(i=null!=(i=n.metaName||(null!=a?a.metaName:a))?i:o)?i.call(s,{name:"metaName",hash:{},data:r}):i)+'" content="'+p((n.renderMetaInfo||a&&a.renderMetaInfo||o).call(s,null!=a?a.metaValue:a,{name:"renderMetaInfo",hash:{},data:r}))+'" ';return i=null!=(i=n.metaDescription||(null!=a?a.metaDescription:a))?i:o,m={name:"metaDescription",hash:{},fn:e.program(5,r,0),inverse:e.noop,data:r},l="function"==typeof i?i.call(s,m):i,n.metaDescription||(l=n.blockHelperMissing.call(a,l,m)),null!=l&&(u+=l),u+' data-dynamic="true">\n'},useData:!0}),t={};e.Array.each([],function(a){var n=e.Template.get("hermes/"+a);n&&(t[a]=n)}),e.Template.register("hermes/head-meta",function(a,r){return r=r||{},r.partials=r.partials?e.merge(t,r.partials):t,n(a,r)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("albums-list-page-view",function(e,t){var i=require("hermes-core/flog")(t);e.namespace("Views")[this.name]=e.Base.create("albums-list-page-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return this.nsid=t.nsid,this.isOwner=t.isOwner,this.withSetId=t.withSetId,this.pageParams=t.pageParams,t.modelRegistryName="sets-models",t.isViewingSelf=!!this.appContext.getViewer().signedIn&&this.nsid===this.appContext.getViewer().nsid,t.photoListConfig={modelParams:{registryName:"sets-models",modelIdOrAttributes:t.nsid,collectionAttributeName:"albumsList"},interactionViewName:"photo-list-album-interaction-view",engagementModelName:"set-models",viewBeaconRestrictedAttribute:"primaryNeedsInterstitial",parentName:this.name,pageParams:t.pageParams,viewBeaconAttribute:"primary",measureAFT:!0,maintainScrollPosition:!1,scrollToWithId:t.withSetId},t.photoListConfig.layout={targetRowHeight:240,forceAspectRatio:1,containerPadding:{top:8,right:0,bottom:8,left:0},itemSpacing:{horizontal:32,vertical:32}},this.isMobile&&(t.photoListConfig.layout.targetRowHeight=200,t.photoListConfig.layout.containerPadding.right=16,t.photoListConfig.layout.containerPadding.left=16,t.photoListConfig.layout.itemSpacing.horizontal=16,t.photoListConfig.layout.itemSpacing.vertical=16),t.subnavConfig={selected:"albums"},this.aftHelper=new e.PhotolistAftHelper(this),this.doOffline=!!this.appContext.flipper.isFlipped("enable-offline-downloadr"),this},subviewConfig:{"global-nav-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0},"fluid-photostream-coverphoto-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"fluid-magic-subnav-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"album-list-toolbar-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,additionalViewClasses:["fluid-centered"]},"photo-list-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"pagination-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0},"signup-footer-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1},"footer-full-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0}},loadState:function(){var t=this;return e.Promise.all([this.appContext.getModel("sets-models",this.nsid),this.appContext.getModel("person-models",this.nsid)]).then(function(e){t.set("albumsListModel",e[0]),t.set("totalItems",e[0].getValue("totalItems")),t.set("owner",e[1])})},buildContainer:function(){var e,t,i=this.get("totalItems");return t=this.pageParams.page>1||i>Math.abs((this.pageParams.viewPageSize||20)*(this.pageParams.page||1)),e=i>0,this.setContainerWithTemplate("albums-list-page",{"fluid-header":this.subviews["fluid-photostream-coverphoto-view"]?this.subviews["fluid-photostream-coverphoto-view"].get("container"):"","album-list-toolbar-view":e?this.subviews["album-list-toolbar-view"].get("container"):"",showPagination:t,isEmpty:0===this.get("totalItems").length,isViewingSelf:this.nsid===this.appContext.getViewer().nsid}),this},buildHeadContainer:function(){var e="";e+=this.templates("head-meta")({isName:!0,metaName:"viewport",metaValue:"width=device-width, viewport-fit=cover, initial-scale=1, maximum-scale=1"}),e+=this.templates("head-meta")({isName:!0,metaName:"robots",metaValue:"noarchive"}),e+=this.templates("head-meta")({isName:!0,metaName:"googlebot",metaValue:"noarchive"}),YUI.Env.isServer?this.set("headContainer",e):(this.set("headContainer",this.subviews["pagination-view"].get("headContainer")),this.updateHead())},showErrorModal:function(t){new e.Views.FluidModal({appContext:this.appContext,darkOverlay:!0,dismissOnOverlayClick:!0,showCancelButton:!1,actionButtonLabel:this.intlMessage({intlName:"common.OK"}),title:this.intlMessage({intlName:"common.UPLOAD_ERROR_TITLE"}),message:t}).show()},showBalls:function(){this.balls||(this.balls=e.Node.create('<div class="loading-balls"></div>'),this.balls.setHTML(this.templates("flickr-balls")({}))),this.get("container").append(this.balls)},hideBalls:function(){this.balls.remove()},downloadAlbum:function(t){var i,o,a,s=this,n=!!this.appContext.flipper.isFlipped("enable-offline-downloadr");if(e.rapidTracker.beacon(this.name,"openDownloadAlbum"),(a=e.Array.find(this.get("albumsListModel").getOwnedModels(),function(e){return e.id===t}))&&this.appContext.getViewer().signedIn&&this.appContext.getViewer().nsid===a.getValue("owner").id&&this.bulkDownloaderView.set("isOwnAlbum",!0),n){if(1===a.getValue("totalCount"))return a.getValue("photoPageList").getPage({page:1,perPage:1}).then(function(t){var i,o,a,s=t[0];s.getValue("isVideo")?o="/video_download.gne?id="+s.id:(i=(a=s.getLargestSize({excludeSizes:[]}).url.split(".")).pop(),o="https:"+a.join(".")+"_d."+i),e.config.doc.location.href=o});if(a.getValue("totalCount")>e.config.flickr.downloadr.max_album_items)return e.rapidTracker.beacon(this.name,"albumListDownloadTooMany"),this.onError(this.intlMessage({intlName:this.bulkDownloaderView.get("isOwnAlbum")?"downloadr.ALBUM_TOO_MANY_OWN":"downloadr.ALBUM_TOO_MANY_OTHER",username:a.getValue("owner").getValue("displayname"),userurl:a.getValue("owner").getValue("url"),url:"/photos/organize?start_tab=one_set"+a.id}),this.intlMessage({intlName:"downloadr.TOO_MANY_TITLE"}),!0);o=s.bulkDownloaderView.createTitle(a.getValue("photoCount"),a.getValue("videoCount")),s.bulkDownloaderView.showDownloadDialog({doOffline:!0,title:o,setID:t})}else i=this.bulkDownloaderView.showLoadingDialog(),this.bulkDownloaderView.prepareArchive({set_id:t}).then(function(e){i.close(),s.bulkDownloaderView.showDownloadDialog(e)}).catch(function(e){i.close(),s.bulkDownloaderView.onError(e)})},shareAlbum:function(t,i){var o=new e.Views.FluidShareAlbumView({appContext:this.appContext,albumId:t});this.showBalls(),e.rapidTracker.beacon(this.name,"openShareAlbum"),o.on("sharePresentationClose",o.destroy.bind(o)),o.initialize().then(function(){this.prepareModal(i)}.bind(o)).then(function(){this.hideBalls()}.bind(this)).catch(function(e){this.hideBalls()}.bind(this))},deleteAlbum:function(t){var o=this;return e.rapidTracker.beacon(this.name,"deleteAlbum"),this.showBalls(),this.confirmAlbumDelete(t).then(function(){return o.appContext.getModel("set-models",t).then(function(i){var a=[];return i.toJSON().photoPageList.forEach(function(e){a.push(o.appContext.getModel("photo-sets-models",e.id).then(function(e){e.getValue("sets").removeFromList(t)}))}),a.push(i.registry.remoteDelete(t).then(function(){o.get("albumsListModel").getValue("albumsList").remove(t),o.appContext.flapp.navigate(e.config.doc.location.href)})),e.Promise.all(a)})}).catch(function(e){i.error("Error deleting album",{err:e}),o.hideBalls()})},confirmAlbumDelete:function(t){var i=this;return e.rapidTracker.beacon(this.name,"deleteConfirm"),new e.Promise(function(t,o){var a=new e.Views.FluidModal({appContext:i.appContext,title:i.intlMessage({intlName:"common.CONFIRMATION"}),message:i.intlMessage({intlName:"album-page.CONFIRM_ALBUM_DELETE_NO_CONTENTS_DELETED"})});i.registerEventHandler(a.on("actionClick",function(){t()})),i.registerEventHandler(a.on("cancelClick",function(){e.rapidTracker.beacon(i.name,"cancelDeleteConfirm"),o()})),a.show()})},handleClick:function(e){var t,i=e.target;i.hasClass("cta")&&(e.halt(),t=i.ancestor(".photo-list-album-interaction").getData("albumId"),i.hasClass("is-disabled")||(i.hasClass("share")?this.shareAlbum(t,i):i.hasClass("book")?this.appContext.flapp.navigate("/create"):i.hasClass("download")?this.downloadAlbum(t):i.hasClass("trash")&&this.deleteAlbum(t)))},destructor:function(){this.balls&&this.balls.inDoc()&&this.balls.remove(),this.balls=null,this.bulkDownloaderView&&this.bulkDownloaderView.destroy()},activate:function(){return this.registerEventHandler(this.get("container").on("click",this.handleClick,this)),this.bulkDownloaderView=new e.BulkDownloaderView({appContext:this.appContext,doOffline:this.doOffline}),this.registerEventHandler(e.globalEvents.subscribe("window:resize",this.handlePageResize.bind(this))),this},handlePageResize:function(){e.config.win.innerWidth<=700?this.hasBeenMobilized||(this.hasBeenMobilized=!0,this.subviews["photo-list-view"].photoListLayout.targetRowHeight=200,this.subviews["photo-list-view"].photoListLayout.containerPadding.right=16,this.subviews["photo-list-view"].photoListLayout.containerPadding.left=16,this.subviews["photo-list-view"].photoListLayout.itemSpacing.horizontal=16,this.subviews["photo-list-view"].photoListLayout.itemSpacing.vertical=16):(this.hasBeenMobilized&&(this.subviews["photo-list-view"].photoListLayout.targetRowHeight=240,this.subviews["photo-list-view"].photoListLayout.containerPadding.right=0,this.subviews["photo-list-view"].photoListLayout.containerPadding.left=0,this.subviews["photo-list-view"].photoListLayout.itemSpacing.horizontal=32,this.subviews["photo-list-view"].photoListLayout.itemSpacing.vertical=32),this.hasBeenMobilized=!1)},getTrackingSegments:function(){return{couldHaveSeenAd:!this.get("owner").getValue("isPro")&&!this.appContext.getViewer().isPro,vwrOwner:this.isOwner?1:0}},onError:function(t,i,o){var a;return a={appContext:this.appContext,dismissOnOverlayClick:!0,dismissOnActionClick:!0,showCancelButton:!1,title:this.intlMessage({intlName:"common.OOPS"}),actionButtonLabel:this.intlMessage({intlName:"common.OK"}),darkOverlay:!0},a[o?"htmlMessage":"message"]=t,this.errorDialog=new e.Views.FluidModal(a),this.errorDialog.show(),this.errorDialog}},{ATTRS:{spaceid:{value:792600578}}})},"@VERSION@",{requires:["flutil","flickr-view","flickr-promise","hermes-template-albums-list-page","global-nav-view","footer-full-view","pagination-view","fluid-photostream-coverphoto-view","fluid-share-album-view","hermes-template-flickr-balls","album-list-toolbar-view","hermes-template-head-link","photolist-aft-helper","hermes-template-head-meta"],optionalRequires:["bulk-downloader-view"],optional:["sets-models"],langBundles:["album-page","common","downloadr","magic-empty-states","meta"]});YUI.add("person-contacts-count-models",function(t){function e(t){e.superclass.constructor.call(this,t)}t.Models[this.name]=e,t.extend(e,t.FlickrModelRegistry,{name:this.name,remote:{read:function(e){return t.ModelFetchers["flickr-people-contacts-getInfo"].run(e,this.appContext)}},attributes:{followerCount:{defaultFn:function(){return 0}},followingCount:{defaultFn:function(){return 0}},pathAlias:{validator:function(e,r){return t.AttributeHelpers.validateString(e)},setter:function(e){return t.AttributeHelpers.coerceString(e)||void 0}}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-people-contacts-getInfo-fetcher","attribute-helpers"]});YUI.add("flickr-people-contacts-getInfo-fetcher",function(e,t){"use strict";e.namespace("ModelFetchers")["flickr-people-contacts-getInfo"]={run:function(r,s){var o=this;return new e.FlickrPromise({apiResponse:s.callAPI("flickr.people.getInfo",this._processParams(r)),personContactsModelRegistry:s.getModelRegistry("person-contacts-count-models")}).then(function(e){return o._processResponse(e,r)},e.FetcherErrorLogger(t))},_processParams:function(e){var t={datecreate:1,extras:"rev_contacts, contacts"};if(e.extras&&"string"==typeof e.extras&&e.extras.length>0&&(t.extras=t.extras+","+e.extras),e.id)t.user_id=e.id;else{if(!e.pathAlias)throw new Error("`fetch` is missing required params.");t.url=e.pathAlias}return t},_processResponse:function(e){var t=e.apiResponse,r=e.personContactsModelRegistry,s=t.person,o=s.id;return r.addOrUpdate({id:o,followerCount:s.revContacts&&parseInt(s.revContacts._content,10),followingCount:parseInt(s.contacts,10),pathAlias:s.pathAlias}),s}}},"@VERSION@",{requires:["flickr-promise"],optional:["person-contacts-count-models","api-helper"]});YUI.add("hermes-lang-downloadr",function(e,a){e.Intl.add("hermes/downloadr","en-US",{DOWNLOAD_WHEN_READY:["We'll zip up these items and send you a FlickrMail with a link to download them when they are ready."],DOWNLOAD_WHEN_READY_LOGGED_OUT:["We'll zip up these items and give you a link to download them when they are ready."],BE_SURE_RIGHTS:["These items belong to another Flickr member and they own the copyright. Be sure you respect the license on each of these items."],CREATE_ZIP:["Create zip file"],CREATING_ZIP:["Creating your zip file...<br>keep this window open"],CREATING_ZIP_LOGGED_IN:["Creating your zip file...<br>"],HAVE_QUESTIONS:['Have questions? Visit the <a target="_blank" href="',"${url}",'">download help page</a> or the <a target="_blank" href="/forum">Flickr Help Forum</a>.<br>No worries, links open in a new window.'],PLEASE_WAIT:["Please wait"],DOWNLOADS_READY:[{type:"plural",valueName:"num",options:{one:"Your zip file of ${#} items is ready to download",other:"Your zip files of ${#} items are ready to download"}}],DOWNLOAD_ZIP_FILE:["Download zip file"],DOWNLOAD_ZIP_FILES:["Download zip file ",{type:"number",valueName:"num"}],POLLING_ERROR:["An error occured retrieving this download.  Please try again later."],FAILED:["Failed"],FAILED_DOWNLOAD:["Creating the zip file has failed.<br>Please try again later."],TOOLTIP_DOWNLOAD_LINK_MESSAGE:['A FlickrMail with your download link will appear here shortly or <a target="_blank" href="',"${url}",'">view the progress</a>.'],TOOLTIP_OK:["OK, thanks"],CAMERAROLL_TOO_MANY:["We can only process <b>up to 500 photos</b> from the Camera Roll at a time. Please select fewer photos and try again."],TOO_MANY_TITLE:["Whoa, that's a lot of photos!"],ALBUM_TOO_MANY_OWN:['We can only process albums with <b>fewer than 5,000 photos</b>. Please use <a target="_blank" href="/cameraroll">Camera Roll</a> or <a target="_blank" href="',"${url}",'">Organizr</a> to create smaller albums or to remove photos from this one, then try again.'],ALBUM_TOO_MANY_OTHER:['We can only process albums with <b>fewer than 5,000 photos</b>. Please ask <a target="_blank" href="',"${userurl}",'">',"${username}","</a> to create smaller albums or to remove photos from this one, then try again."]})},"@VERSION@",{requires:["intl"]});YUI.add("hermes-lang-magic-empty-states",function(o,e){o.Intl.add("hermes/magic-empty-states","en-US",{PHOTOSTREAM_EMPTY:["You have no public photos"],PHOTOSTREAM_EMPTY_OTHER:["This user has no public photos"],PHOTOSTREAM_EMPTY_ACTION:["Upload photos"],ALBUM_EMPTY:["You have no albums"],ALBUM_EMPTY_OTHER:["This user has no albums"],ALBUM_EMPTY_ACTION:["Create an album"],FAVORITES_EMPTY:["You have no favorites"],FAVORITES_EMPTY_OTHER:["This user has no favorites"],FAVORITES_EMPTY_ACTION:["Explore photos"],SHARED_ENTITY_EMPTY_OTHER:["Nothing shared"],CREATIONS_NO_WALLARTS:["Wall art and photo books. Created by you."],CREATIONS_NO_BOOKS:["Wall art and photo books. Created by you."],STATS_HEADLINE:["Introducing all new stats for Pro"],STATS_HEADLINE_1:["When it comes to stats. Know it all."],STATS_HEADLINE_2:["Everything you need to know. Statistically speaking."],STATS_HEADLINE_3:["Details. Details. Details."],STATS_HEADLINE_4:["The kind of minutia you’ll like."],STATS_SUB_HEADLINE:["Gain an understanding of how people are discovering your Flickr photos. See which of your photos are trending now and which have performed the best over the life of your Flickr account."],STATS_SUB_HEADLINE_1:["Want to know how people are finding your photos on Flickr? Curious to  see which of your photos are trending now and which have performed the best over the life of your account? Get all the details and more."],FAVES_HEADLINE_YOU:["Start picking your faves. Just click on the star."],FAVES_SUBHEADLINE_YOU:["Like something you see? Let the photographer know by clicking on the star icon."],FAVES_HEADLINE_OTHERS:["${username}"," doesn't have any favorites yet. Stay tuned."],START_EXPLORING_FLICKR:["Start exploring Flickr"],CAMERAROLL_HEADLINE:["Got a lot of photos? We've got a lot of space."],CAMERAROLL_SUBHEADLINE:["Every flickr member gets 1,000 GB of photo storage for FREE. Every photo is safely stored and can be accessed from your computer, smart phone or tablet at any time &dash; from anywhere."],CAMERAROLL_SUBHEADLINE_MAGIC:["Your Magic View is empty because we have not found any relevant categories for your photos so far. Try uploading more photos with different subjects."],PHOTOSTREAM_HEADLINE_YOU:["Don't forget to upload your photos."],PHOTOSTREAM_SUBHEADLINE_YOU:["Your photostream is your public-facing portfolio. Upload photos and set them to public using the Camera Roll to populate your photostream."],START_UPLOADING:["Start uploading"],PHOTOSTREAM_HEADLINE_YOU_PUBLIC:["You have no public photos."],PHOTOSTREAM_SUBHEADLINE_YOU_PUBLIC:["Your photostream is your public-facing portfolio. Set your photos to public using the Camera Roll to populate your photostream."],PHOTOSTREAM_HEADLINE_YOU_FRIENDS:["You have no public photos."],PHOTOSTREAM_SUBHEADLINE_YOU_FRIENDS:["Your photostream is your public-facing portfolio. Set your photos to public using the Camera Roll to populate your photostream."],PHOTOSTREAM_HEADLINE_YOU_FAMILY:["You have no public photos."],PHOTOSTREAM_SUBHEADLINE_YOU_FAMILY:["Your photostream is your public-facing portfolio. Set your photos to public using the Camera Roll to populate your photostream."],PHOTOSTREAM_HEADLINE_YOU_FRIENDSFAMILY:["You have no public photos."],PHOTOSTREAM_SUBHEADLINE_YOU_FRIENDSFAMILY:["Your photostream is your public-facing portfolio. Set your photos to public using the Camera Roll to populate your photostream."],PHOTOSTREAM_HEADLINE_OTHERS:["${username}"," hasn't made any photos public yet."],ALBUMS_HEADLINE_YOU:["Let's make an album."],ALBUMS_SUBHEADLINE_YOU:["Easily organize all your photos into beautiful albums to share with friends, family, or even other Flickr members."],GO_TO_CAMERA_ROLL:["Go to Camera Roll"],ALBUMS_HEADLINE_OTHERS:["As soon as ","${username}"," puts the camera down, we may have an album to view."],ALBUMS_SLOW:["We're having some trouble displaying this album at the moment. Please try again."],PHOTOSTREAM_SLOW:["We're having some trouble displaying this photostream at the moment. Please try again."],FAVES_SLOW:["We're having some trouble displaying these favorites at the moment. Please try again."],CAMERAROLL_SLOW:["We're having some trouble displaying your cameraroll at the moment. Please try again."],GALLERIES_SLOW:["We're having some trouble displaying these galleries at the moment. Please try again."],GALLERIES_HEADLINE_YOU:["Your gallery walls are looking pretty bare."],GALLERIES_SUBHEADLINE_YOU:["Galleries are a way to showcase other photographers’ photos and videos. When you see something you love in Flickr, click the [+] icon to save it to a gallery."],GALLERIES_SUBHEADLINE_YOU_VISIT_PAGE:["Galleries are a way to showcase other photographers’ photos and videos. When you see something you love on Flickr, visit its page to save it to a gallery."],GO_EXPLORE:["Go Explore"]})},"@VERSION@",{requires:["intl"]});YUI.add("hermes-lang-meta",function(e,o){e.Intl.add("hermes/meta","en-US",{PHOTOSTREAM:["Explore ","${username}","'s ",{type:"plural",valueName:"photoCount",options:{one:"photo on Flickr!",other:"${#} photos on Flickr!"}}],PHOTOSTREAM_NO_PHOTOS:["Explore ","${username}","'s photos on Flickr!"],ALBUMS_LIST:["Explore ","${username}","'s ",{type:"plural",valueName:"photoCount",options:{one:"album on Flickr!",other:"${#} albums on Flickr!"}}],ALBUMS_LIST_NO_ALBUMS:["Explore ","${username}","'s albums on Flickr!"],FAVORITES:["Explore ","${username}","'s ",{type:"plural",valueName:"photoCount",options:{one:"favorites on Flickr!",other:"${#} favorites on Flickr!"}}],FAVORITES_NO_PHOTOS:["Explore ","${username}","'s favorites on Flickr!"],META_DESCRIPTION_BY_USER_ON_FLICKR:["By ","${username}"," on Flickr"],PHOTOSTREAM_ATOM_TITLE:["Flickr: ","${username}","'s Photostream Atom feed"],FAVORITES_ATOM_TITLE:["Flickr: ","${username}","'s Favorites Atom feed"],GROUP_POOL_ATOM_TITLE:["Flickr: ","${groupName}","'s Photos Atom feed"],GROUP_DISCUSSIONS_ATOM_TITLE:["Flickr: ","${groupName}","'s Discussions Atom feed"],ALBUM_ATOM_TITLE:["Flickr: ","${username}","'s \"","${albumTitle}",'" Atom feed']})},"@VERSION@",{requires:["intl"]});YUI.add("hermes-lang-cameraroll",function(e,o){e.Intl.add("hermes/cameraroll","en-US",{CAMERA_ROLL:["Camera Roll"],PRIVACY_ERROR:["An error occurred while trying to change the Privacy of the photos. Please try again."],CIRCA:["Circa"],CIRCA_SOMETIME:["Circa / Sometime"],CIRCA_SOMETIME_YEAR:["Circa / Sometime in ","${year}"],CIRCA_YEAR:["Circa ","${year}"],SOMETIME_IN_MONTH:["Sometime in ",{type:"date",valueName:"date",format:"monthYear"}],DELETE_PHOTOS:[{type:"plural",valueName:"selectedCount",options:{one:"Delete ${#} photo?",other:"Delete ${#} photos?"}}],DELETE_MESSAGE:["You cannot reverse this action. ",{type:"plural",valueName:"selectedCount",options:{one:"Are you sure you want to permanently delete this photo?",other:"Are you sure you want to permanently delete all these photos?"}}],DELETE_ERROR:["An error has occurred deleting your selected photos. Please try again."],REMOVE_FROM_SELECTION:["Remove from selection"],EDIT_PHOTOS:[{type:"plural",valueName:"selectedCount",options:{one:"Editing ${#} photo",other:"Editing ${#} photos"}}],GO_TO_PHOTOPAGE:["Go to photo page"],CHANGE_PRIVACY_PHOTOS_PUBLIC:[{type:"plural",valueName:"count",options:{one:"Make ${#} photo public?",other:"Make ${#} photos public?"}}],CHANGE_PRIVACY_MESSAGE_PUBLIC:[{type:"plural",valueName:"count",options:{one:"Are you sure you want to make this photo public?",other:"Are you sure you want to make these photos public?"}}],CHANGE_PRIVACY_PHOTOS:[{type:"plural",valueName:"count",options:{one:"Change privacy of ${#} photo?",other:"Change privacy of ${#} photos?"}}],CHANGE_PRIVACY_MESSAGE:[{type:"plural",valueName:"count",options:{one:"Are you sure you want to change the privacy of this photo?",other:"Are you sure you want to change the privacy of these photos?"}}],ERROR_TITLE_PHOTOS:[{type:"plural",valueName:"count",options:{one:"Unable to update the Title/Description of one photo.",other:"Unable to update the Title/Description of ${#} photos."}}],ERROR_SAFETY_PHOTOS:[{type:"plural",valueName:"count",options:{one:"Unable to update the safety level of one photo.",other:"Unable to update the safety level of ${#} photos."}}],ERROR_LICENSE_PHOTOS:[{type:"plural",valueName:"count",options:{one:"Unable to update the license of one photo.",other:"Unable to update the license of ${#} photos."}}],ERROR_PERMISSIONS_PHOTOS:[{type:"plural",valueName:"count",options:{one:"Unable to update the permissions of one photo.",other:"Unable to update the permissions of ${#} photos."}}],ERROR_DATES_PHOTOS:[{type:"plural",valueName:"count",options:{one:"Unable to update the dates of one photo.",other:"Unable to update the dates of ${#} photos."}}],ERROR_TAGS_PHOTOS:[{type:"plural",valueName:"count",options:{one:"Unable to update the tags of one photo.",other:"Unable to update the tags of ${#} photos."}}],ERROR_PEOPLE_PHOTOS:[{type:"plural",valueName:"count",options:{one:"Unable to update the people in one photo.",other:"Unable to update the people in ${#} photos."}}],CONSOLIDATED_ERROR_MESSAGE:["The following errors occurred while processing your selected photos:"],MAX_TAGS_REACHED:["Maximum number of tags added."],MAX_PEOPLE_REACHED:["Maximum number of people added."],UNABLE_TO_ADD_USERS_TO_PHOTO:[{type:"plural",valueName:"count",options:{one:"${#} person could not be added to certain photos as they were either already present, or did not want to be identified in those photos.",other:"${#} people could not be added to certain photos as they were either already present, or did not want to be identified in those photos."}}],UNABLE_TO_ADD_TAGS_TO_PHOTOS:[{type:"plural",valueName:"count",options:{one:"Unable to add these tags to the photo as this would exceed the maximum number of tags possible on the photo.",other:"Unable to add these tags to ${#} photos as this would exceed the maximum number of tags possible on those photos."}}],UNABLE_TO_ADD_USERS_TO_ALL_PHOTOS:[{type:"plural",valueName:"count",options:{one:"${#} person could not be added to all the selected photos.",other:"${#} people could not be added to all the selected photos."}}],UNABLE_TO_ADD_PHOTOS_TO_ALL_USERS:[{type:"plural",valueName:"count",options:{one:"Unable to add people to one photo.",other:"Unable to add people to ${#} photos."}}],CONTACT_LIST_ERROR:["Unable to fetch your contact list."],DATE_POSTED_GREATER_THAN_FLICKR_JOIN:["Posted date must be after you joined Flickr."],DATE_UPLOADED_GREATER_THAN_FLICKR_JOIN:["Uploaded date must be after you joined Flickr."],TITLE_PLACEHOLDER:[{type:"plural",valueName:"selectedCount",options:{one:"Change title",other:"Change all titles"}}],DESCRIPTION_PLACEHOLDER:[{type:"plural",valueName:"selectedCount",options:{one:"Change description",other:"Change all descriptions"}}],EDIT_PRIVACY_LABEL:[{type:"plural",valueName:"selectedCount",options:{one:"Who can see this photo",other:"Who can see these photos"}}],EDIT_COMMENTING_PERMISSION_LABEL:[{type:"plural",valueName:"selectedCount",options:{one:"Who can comment on this photo",other:"Who can comment on these photos"}}],EDIT_TAGGING_PERMISSION_LABEL:[{type:"plural",valueName:"selectedCount",options:{one:"Who can add tags and people to this photo",other:"Who can add tags and people to these photos"}}],EDIT_SAFETY_LABEL:[{type:"plural",valueName:"selectedCount",options:{one:"How safe is this photo for public search",other:"How safe are these photos for public search"}}],EDIT_COPYRIGHT_LABEL:[{type:"plural",valueName:"selectedCount",options:{one:"Copyright protection level for this photo",other:"Copyright protection level for these photos"}}],UNKNOWN:["Unknown"],DELETE_ERROR_TITLE:["Oh no!"],DELETE_ERROR_PHOTO_MISSING:["We couldn’t delete all of these photos because it looks like some of them aren’t accessible anymore."],DELETE_ERROR_SIGNED_OUT:['We couldn’t delete these photos because it looks like you’re no longer signed in. <a href="/signin/?redir=/cameraroll/">Click here to sign in and try again</a>.'],DELETE_ERROR_UNKNOWN:['We couldn’t delete these photos because an unexpected error occurred. <a href="/cameraroll/">Click here to reload and try again</a>.'],NODATE:["No date"],YOU_HAVE_1000GB_OF_FREE_SPACE:["You have 1000GB of space."],UPLOAD_STRAIGHT_FROM_DESKTOP_WITH_UPLOADER:["Upload photos straight from your desktop."],DOWNLOAD_FLICKR_UPLOADR:["Download Flickr Uploadr"],DATE_TAKEN:["Date taken"],DATE_POSTED:["Date posted"],DATE_UPLOADED:["Date uploaded"],TOO_MANY_EDITS:["You may only edit data for ","${count}"," photos at a time."],ADD_TO_ALBUMS_PLURAL:[{type:"plural",valueName:"count",options:{one:"Add this photo to an album",other:"Add these photos to an album"}}],NEW_USER_PRO_INTRO:["A new way to browse, edit, and organize your photos.  Powered by unlimited storage and really smart Flickrbots. Many more features to come!"],NEW_USER_NONPRO_INTRO:["A new way to browse, edit, and organize your photos.  Powered by 1000 GB of free storage and really smart Flickrbots. Many more features to come!"],NEW_USER_JUMP:["Jump through years of photos with the timeline"],NEW_USER_EDIT:["Easily edit, create albums, and manage photos"],NEW_PHOTOS_UPLOADED:[{type:"plural",valueName:"count",options:{one:"${#} new photo has been uploaded",other:"${#} new photos have been uploaded"}}],NEW_PHOTOS_CATEGORIZED:[{type:"plural",valueName:"count",options:{one:"${#} new photo has been categorized",other:"${#} new tagged photos have been categorized"}}],NEW_USER_WELCOME_TITLE:["Welcome to Camera Roll!"],REFRESH:["Refresh"],NEW_USER_VIEW:["View photos by date taken or uploaded"],CAMERAROLL_BETA:["Beta"],PROVIDE_FEEDBACK:["Provide feedback on the new Camera Roll"],BUILDING_MAP:["Hey there, we're building your massive library, this might take a sec..."],SOFTWARE_DOWNLOAD:["Software download"],DOWNLOAD_TOS_COPY:["By downloading this software, you consent to its installation and the automatic installation of future updates, and you agree that you are subject to the Yahoo terms and Privacy Policy. You can uninstall this software at any time."],EMPTY_STATE_MESSAGE_NONPRO:["Upload to begin a new way to browse, edit, and organize your photos.  Powered by 1000 GB of free storage and really smart Flickrbots. Many more features to come!"],EMPTY_STATE_MESSAGE_PRO:["Upload to begin a new way to browse, edit, and organize your photos.  Powered by unlimited storage and really smart Flickrbots. Many more features to come!"],WELCOME_TO_CAMERAROLL:["Welcome to Camera Roll"],ALMOST:["(Almost...)"],NOT_ELIGIBLE:["Currently you are not eligible for the BETA test but we are working hard to get this great experience to every Flickr user very soon! Stay tuned!"],MODERN_DESKTOP_BROWSERS:["You qualify to experience this new way to browse, edit and organize your photos. However, you can only experience this exciting new feature on <strong>modern desktop browsers</strong>... for now ;)"],GO_TO_PHOTOSTREAM:["Go to Photostream"],CHANGES_APPLIED_TO_PHOTOS:["Changes have been applied to ",{type:"plural",valueName:"count",options:{one:"${#} photo",other:"${#} photos"}}],SHOW_INFO:["Show info"],FEEDBACK:["Feedback"],MULTIPLE_SELECT_VALUE:["Multiple"],GET_FLICKR_UPLOADR_FOR_MAC:["Get the Flickr Uploadr for Mac"],GET_FLICKR_UPLOADR_FOR_WINDOWS:["Get the Flickr Uploadr for Windows"],UPLOAD_THOUSANDS_OF_PHOTOS:["Upload thousands of photos at once"],INSTALL_NOW:["Install Now"],SMALL_BANNER_INSTALL:["Install Uploadr"],SMALL_BANNER_CTA:["Upload 1000s of photos fast"],SELECT_ALL:["Select all"],DATE_TITLE:[{type:"date",valueName:"intlDate",format:"long"}],MONTH:[{type:"date",valueName:"intlDate",format:"month"}],YEAR:[{type:"date",valueName:"intlDate",format:"year"}],PRIVACY:["Privacy"],EDIT:["Edit"],DELETE:["Delete"],CLEAR_SELECTION:["Clear selection"],ADD_NEW_TAGS:["Add new tags"],AUTOTAGS:["Autotags"],CAMERAROLL_SHARING_WARNING:["Careful! The private photos in this selection will be visible to anyone who has the share link. Is that really what you want?"],DO_NOT_REMIND_SHARING:["Don't remind me again"],DOWNLOAD_GENERIC_ERROR:["There was an error downloading this selection. Please try again."],TOO_MANY_SHARES:["You may only share ","${count}"," photos at a time."],PREPARING_DOWNLOAD:["Preparing download"],DOWNLOAD_NOT_AVAILABLE_ERROR:["There are no photos or videos available in this selection for you to download."],DOWNLOAD_DISABLED_ERROR:["Bulk downloading is currently unavailable. Please try again in a minute."],TOO_MANY_DOWNLOADS:["You may only download ","${count}"," photos at a time."],NO_AUTOTAGS_YET_UPLOAD_MORE:['It looks like our friendly robots haven’t spotted anything to <a href="https://help.yahoo.com/kb/flickr/tag-keywords-flickr-sln7455.html?soc_src=mail&soc_trk=ma">tag</a> in your photos just yet. <a href="https://www.flickr.com/upload">Why not upload some more?</a>'],NO_AUTOTAGS_YET:['It looks like our friendly robots haven’t spotted anything to <a href="https://help.yahoo.com/kb/flickr/tag-keywords-flickr-sln7455.html?soc_src=mail&soc_trk=ma">tag</a> in your photos just yet.'],UPLOAD_MORE:["Why not upload some more?"],MAGIC_VIEW:["Magic view"],INSTALL_FLICKR_UPLOADER_FOR_MAC:["Install Flickr Uploadr to quickly and safely backup your entire photo collection."],MAGIC_VIEW_TITLE_CASE:["Magic View"],SUBJECT_VIEW:["Subject view"],SUBJECT_VIEW_TITLE_CASE:["Subject View"],ALPHA_WARNING_TITLE:["Magic View Alpha: <em>Confidential</em>"],ALPHA_WARNING_BODY:["Shh, it’s a secret! Remember, you need to keep the new features and design you see in this alpha group secret. You can't tell your friends, post to your blog or even tweet about them before we launch for the rest of the Flickr community."],ALPHA_WARNING_BUTTON:["Mum's the word, got it!"],ERROR_SIGNED_OUT:['It looks like you’re no longer signed in. <a href="/signin/?redir=/cameraroll/">Click here to sign in and try again</a>.'],ERROR_BEFORE_EDITING_OUT:["Something went wrong while preparing your photos to be edited.  Please try again."],SELECT_PHOTO:["Select photo"],VIEW_ON_PHOTO_PAGE:["View on photo page"],ACCESSIBLE_ZOOM_ICON:["Click to zoom in."]})},"@VERSION@",{requires:["intl"]});